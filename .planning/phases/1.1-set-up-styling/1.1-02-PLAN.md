---
phase: 1.1-set-up-styling
plan: 02
type: execute
wave: 2
depends_on: ["1.1-01"]
files_modified:
  - app/components/ThemeToggle.vue
  - app/layouts/default.vue
  - app/pages/index.vue
autonomous: false

must_haves:
  truths:
    - "Clicking the sun/moon icon in the navbar toggles between light and dark mode"
    - "Dark mode preference persists across page refresh (stored in localStorage)"
    - "Navbar shows site name, navigation area, and dark mode toggle"
    - "Hamburger menu appears on mobile and toggles the navbar menu on click"
    - "Footer displays copyright with current year"
    - "Page content is centered with a readable max-width"
    - "Homepage shows placeholder content styled with Bulma classes"
    - "Dark mode uses warm neutral backgrounds (#171717 base), not blue-tinted"
    - "Links use Type S red (#b81a35) color, no underline, underline on hover"
  artifacts:
    - path: "app/components/ThemeToggle.vue"
      provides: "Sun/moon dark mode toggle button using Lucide icons and useColorMode()"
      contains: "useColorMode"
    - path: "app/layouts/default.vue"
      provides: "Bulma navbar layout with hamburger, ThemeToggle, main slot, footer"
      contains: "navbar"
    - path: "app/pages/index.vue"
      provides: "Styled homepage placeholder with Bulma section/container/content classes"
      contains: "section"
  key_links:
    - from: "app/layouts/default.vue"
      to: "app/components/ThemeToggle.vue"
      via: "Component auto-import in navbar-end"
      pattern: "ThemeToggle"
    - from: "app/components/ThemeToggle.vue"
      to: "@nuxtjs/color-mode"
      via: "useColorMode() composable"
      pattern: "useColorMode"
    - from: "app/layouts/default.vue"
      to: "bulma navbar classes"
      via: "Bulma CSS class usage"
      pattern: "navbar"
---

<objective>
Create the ThemeToggle component, replace the default layout with a Bulma-styled navbar/footer shell, and update the homepage with Bulma styling. Then verify the complete styling infrastructure visually.

Purpose: After this plan, the site has a functional layout shell with dark mode toggle, responsive navbar with hamburger menu, and styled placeholder content -- ready for content and feature pages in Phases 2-8.

Output: ThemeToggle.vue component, updated default.vue layout, updated index.vue homepage.
</objective>

<execution_context>
@/Users/rich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/1.1-set-up-styling/1.1-RESEARCH.md
@.planning/phases/1.1-set-up-styling/1.1-CONTEXT.md
@.planning/phases/1.1-set-up-styling/1.1-01-SUMMARY.md
@app/assets/scss/_variables.scss
@app/components/ThemeToggle.vue
@app/layouts/default.vue
@app/pages/index.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ThemeToggle component</name>
  <files>app/components/ThemeToggle.vue</files>
  <action>
Create `app/components/ThemeToggle.vue` -- a sun/moon toggle button for the navbar.

**Template (Pug):**
- A `<button>` with class `theme-toggle`, type `button`
- `@click="toggle"` handler
- `:aria-label` that says "Switch to light mode" when dark, "Switch to dark mode" when light
- Show `<LucideSun>` when `colorMode.value === 'dark'` (sun icon to indicate "click for light")
- Show `<LucideMoon>` when light (moon icon to indicate "click for dark")
- Icon size: 20

**Script (`<script setup lang="ts">`):**
- `const colorMode = useColorMode()` (auto-imported by @nuxtjs/color-mode)
- `const toggle = ()` that sets `colorMode.preference` to the opposite: `colorMode.value === 'dark' ? 'light' : 'dark'`

**Style (`<style lang="scss" scoped>`):**
- `.theme-toggle`: no background, no border, cursor pointer, padding `$spacing-sm`, color inherit, flex center, min-width/min-height 44px (touch target), border-radius `$radius-default`, transition background-color `$transition-fast`
- Hover: `background-color: rgba(128, 128, 128, 0.1)`

SCSS variables ($spacing-sm, $radius-default, $transition-fast) are available via the `additionalData` injection configured in Plan 01.

LucideSun and LucideMoon are auto-imported by nuxt-lucide-icons (no manual import needed).
  </action>
  <verify>
1. File exists: `ls app/components/ThemeToggle.vue`
2. Contains `useColorMode` (script), `LucideSun`/`LucideMoon` (template), `theme-toggle` (style)
3. Uses `<template lang="pug">`, `<script setup lang="ts">`, `<style lang="scss" scoped>`
  </verify>
  <done>
ThemeToggle.vue created with sun/moon icon toggle, useColorMode() integration, accessible aria-label, 44px touch target, and scoped SCSS styles using design token variables.
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace default layout and update homepage</name>
  <files>app/layouts/default.vue, app/pages/index.vue</files>
  <action>
**File 1: Replace `app/layouts/default.vue`** with Bulma-styled layout shell.

**Template (Pug):**
```
div
  //- Site navigation
  nav.navbar.is-fixed-top(role="navigation" aria-label="main navigation")
    .container
      .navbar-brand
        NuxtLink.navbar-item.has-text-weight-bold(to="/") DE5.org
        //- Mobile hamburger toggle
        a.navbar-burger(
          role="button"
          aria-label="menu"
          :aria-expanded="menuOpen"
          :class="{ 'is-active': menuOpen }"
          @click="menuOpen = !menuOpen"
        )
          span(aria-hidden="true")
          span(aria-hidden="true")
          span(aria-hidden="true")
          span(aria-hidden="true")
      .navbar-menu(:class="{ 'is-active': menuOpen }")
        .navbar-end
          .navbar-item
            ThemeToggle

  //- Page content
  main
    slot

  //- Site footer
  footer.footer
    .content.has-text-centered
      p &copy; {{ new Date().getFullYear() }} DE5.org — For Acura Integra Type S (DE5) owners
```

**Script (`<script setup lang="ts">`):**
```ts
// Mobile menu toggle state
const menuOpen = ref(false)

// Close mobile menu when route changes
const route = useRoute()
watch(() => route.path, () => {
  menuOpen.value = false
})
```

The `watch` on route.path closes the hamburger menu when navigating to a new page.

**Key details:**
- `.is-fixed-top` on navbar -- requires `body { padding-top: 3.25rem }` (handled in _base.scss from Plan 01)
- Bulma navbar needs 4 `<span>` elements inside `.navbar-burger` (Bulma 1.x requirement for the hamburger icon)
- `ThemeToggle` auto-imports from `app/components/`
- No scoped style block needed -- this layout uses only Bulma utility classes

**File 2: Update `app/pages/index.vue`** with Bulma-styled placeholder.

Replace the current bare-bones homepage with a styled placeholder that demonstrates the styling system is working:

**Template (Pug):**
```
section.section
  .container
    //- Page heading
    h1.title DE5.org
    h2.subtitle Community knowledge hub for Acura Integra Type S (DE5) owners

    //- Styled content block to verify .content class and markdown styling
    .content
      p.
        Curated FAQs, maintenance guides, and community knowledge
        for the Acura Integra Type S — all in one place.
      p
        em Coming soon — curated FAQs, search, and community knowledge.

    //- Sample cards to verify card/surface styling
    .columns.is-multiline
      .column.is-one-third
        .box
          h3.title.is-5 FAQs
          p Common questions answered with sources.
      .column.is-one-third
        .box
          h3.title.is-5 Guides
          p Maintenance and modification guides.
      .column.is-one-third
        .box
          h3.title.is-5 Community
          p Knowledge from forums and owners.
```

**Script:**
Keep the existing `useHead({ title: 'Home' })` call.

The `.section > .container` pattern gives Bulma's default max-width and padding. The `.content` class shows how rendered markdown will look. The `.box` cards verify card/surface styling (subtle borders + rounded corners from Bulma defaults + our radius override).
  </action>
  <verify>
1. `cat app/layouts/default.vue` shows Bulma navbar with `.is-fixed-top`, hamburger with 4 spans, ThemeToggle in navbar-end, footer with `.footer` class.
2. `cat app/pages/index.vue` shows `.section > .container` structure, `.title`/`.subtitle`, `.content` block, `.columns` with `.box` cards.
3. `yarn dev` starts without errors.
4. Opening http://localhost:3000 shows a styled page with navbar, content, cards, and footer.
  </verify>
  <done>
default.vue has Bulma navbar with fixed-top positioning, site name link, hamburger toggle for mobile, ThemeToggle in navbar-end, route-change menu close, main slot, and styled footer. index.vue has section/container layout, title/subtitle, content block, and 3-column card grid demonstrating box styling.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete styling infrastructure: Bulma CSS framework with modular imports, SCSS design tokens, dark mode with warm neutral backgrounds, Inter font (self-hosted), Lucide icons, responsive navbar with hamburger menu, dark mode toggle, and styled homepage placeholder.
  </what-built>
  <how-to-verify>
Start the dev server: `yarn dev`

Open http://localhost:3000 in your browser and verify:

**1. Layout Shell**
- [ ] Navbar is fixed to the top of the page with "DE5.org" brand link on the left
- [ ] Dark mode toggle icon (sun or moon) is visible in the navbar on the right
- [ ] Footer shows copyright with current year at the bottom of the page
- [ ] Content is centered with readable max-width

**2. Dark Mode**
- [ ] Click the sun/moon icon -- page toggles between light and dark mode
- [ ] Dark mode has warm neutral backgrounds (dark gray, not blue-tinted)
- [ ] Refresh the page -- dark mode preference persists
- [ ] Links use Type S red (#b81a35) accent color in both modes

**3. Typography**
- [ ] Text renders in Inter font (check computed style in devtools if unsure)
- [ ] Headlines are bold with clear size hierarchy (title > subtitle > body)

**4. Cards/Surfaces**
- [ ] Three placeholder cards ("FAQs", "Guides", "Community") are visible
- [ ] Cards have subtle borders and rounded corners

**5. Responsive (Mobile)**
- [ ] Resize browser to mobile width (~375px)
- [ ] Hamburger icon appears, navbar items collapse
- [ ] Click hamburger -- menu expands showing the theme toggle
- [ ] Cards stack vertically on mobile

**6. Network**
- [ ] Open DevTools > Network tab, refresh
- [ ] No requests to fonts.googleapis.com or external CDNs (Inter is self-hosted)
  </how-to-verify>
  <resume-signal>Type "approved" if everything looks good, or describe any issues to fix.</resume-signal>
</task>

</tasks>

<verification>
1. `yarn dev` starts without errors.
2. `yarn check` passes (lint + format + typecheck).
3. Homepage renders with Bulma navbar, styled content, and footer.
4. Dark mode toggle works and persists.
5. Mobile responsive: hamburger menu works, content stacks.
6. No external font CDN requests.
</verification>

<success_criteria>
- ThemeToggle.vue toggles dark/light mode using useColorMode()
- default.vue has Bulma navbar with hamburger, ThemeToggle, and footer
- index.vue shows styled placeholder with Bulma section/container/content/box classes
- Dark mode uses warm neutral backgrounds (#171717)
- Inter font renders from local self-hosted source
- Responsive layout works (hamburger on mobile, stacked cards)
- User approves visual checkpoint
</success_criteria>

<output>
After completion, create `.planning/phases/1.1-set-up-styling/1.1-02-SUMMARY.md`
</output>
