# Phase 1.1: Set Up Styling - Research

**Researched:** 2026-02-09
**Domain:** CSS framework, SCSS architecture, dark mode, typography, icons
**Confidence:** HIGH

## Summary

This research covers the complete styling infrastructure for DE5.org: Bulma 1.0.4 via SCSS with modular imports, @nuxtjs/color-mode for dark mode toggling, @nuxt/fonts for self-hosted Inter, nuxt-lucide-icons for icons, and SCSS architecture patterns in Nuxt 4 with Vite 7.

The standard approach is: compile a single `main.scss` entry file that imports Bulma modularly (only needed components), override Bulma variables before import using `@use ... with (...)` syntax, and register this file in `nuxt.config.ts css[]`. Use `vite.css.preprocessorOptions.scss.additionalData` only for injecting SCSS variables/mixins into Vue SFC `<style>` blocks. Dark mode leverages Bulma 1.x's built-in `[data-theme=dark]` support, triggered by @nuxtjs/color-mode's `dataValue: 'theme'` option.

**Critical finding:** nuxt-purgecss has a known Nuxt 4 compatibility issue (#203, July 2025) and is minimally maintained. Use Bulma's modular SCSS imports instead -- import only the components you need. This eliminates the need for PurgeCSS entirely while achieving the same bundle size reduction goal.

**Primary recommendation:** Use Bulma modular SCSS imports (not full Bulma + PurgeCSS) with @nuxtjs/color-mode `dataValue: 'theme'` for seamless dark mode integration.

<user_constraints>

## User Constraints (from CONTEXT.md)

### Locked Decisions

- **CSS Framework:** Bulma via SCSS (not Tailwind, Bootstrap, or plain CSS)
- **PurgeCSS:** `nuxt-purgecss` to strip unused Bulma classes at build time
- **SCSS preprocessor:** `sass` package (Vite handles natively)
- **Primary accent:** `#b81a35` (Type S red) -- defined as single SCSS variable for easy adjustment
- **Light mode:** Clean/minimal -- white/light backgrounds, neutral tones, content-forward
- **Dark mode:** Warm neutral darks (~#171717 base, ~#262626 surfaces) -- no blue undertone
- **Acura red usage:** Sparingly -- links, buttons, hover states, interactive elements only
- **Typography:** Inter (Google Font, self-hosted) with system font fallback
- **Icons:** Lucide -- clean line icons, tree-shakeable
- **Dark mode trigger:** Defaults to system preference, user override with manual toggle
- **Toggle location:** Nav bar (sun/moon icon), preference stored in localStorage
- **Link styling:** Accent color text, no underline by default, underline on hover
- **Card/surface styling:** Subtle borders + rounded corners
- **Motion:** Subtle transitions -- define transition variables for hover, dark mode toggle, page transitions
- **SCSS architecture:** Partials `_variables.scss`, `_bulma-overrides.scss`, `_base.scss`, `_dark-mode.scss` imported into `main.scss`
- **Override Bulma variables** directly -- set `$primary`, `$family-sans-serif`, etc. BEFORE importing Bulma
- **Component styling:** Bulma global classes for layout/base + Vue SFC `<style lang="scss" scoped>` for component-specific
- **Bulma `.content` class** configured to auto-style Nuxt Content rendered markdown
- **Code blocks:** Basic styling only (monospace, background, padding) -- no syntax highlighting
- **Layout shell:** Basic `default.vue` with nav bar + main content area + footer skeleton
- **Hamburger menu** on mobile (Bulma's built-in navbar collapse)
- **Dark mode toggle** in nav bar
- **Mobile-first** CSS (min-width media queries, Bulma's natural approach)
- **Bulma's default breakpoints:** mobile (<769px), tablet (769px+), desktop (1024px+), widescreen (1216px+), fullhd (1408px+)
- **Responsive media defaults:** Global `max-width: 100%`, `height: auto` for images
- **Touch-friendly tap targets:** Minimum 44px for buttons/links on mobile
- **Reference sites:** nuxt.com and content.nuxt.com

### Claude's Discretion

- Spacing/density: generous for landing pages, tighter for content-dense FAQ pages
- Max content width choice (likely ~1024px based on reference sites)
- Exact transition durations and easing curves
- Loading skeleton design if applicable
- Specific Bulma module imports (only import what's needed)

### Deferred Ideas (OUT OF SCOPE)

- Phase 8 (Visual Polish): Revisit and confirm Type S red brand color choice across all three reference values
- Phase 8 (Visual Polish): Revisit dark mode background palette to confirm warm neutral direction

</user_constraints>

## Standard Stack

### Core

| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| bulma | 1.0.4 | CSS framework (SCSS source) | Semantic classes, `.content` auto-styling, built-in dark mode via CSS variables, modular SCSS imports |
| sass | ^1.97 | SCSS compilation | Required by Bulma 1.x, Vite 7 handles natively with modern API |
| @nuxtjs/color-mode | 4.0.0 | Dark/light mode toggle | Official Nuxt module, system preference detection, localStorage persistence, `dataValue` option for `data-theme` attribute |
| @nuxt/fonts | 0.13.0 | Font optimization/self-hosting | Zero-config, auto-downloads Google Fonts locally, font-display swap, fallback metrics |
| nuxt-lucide-icons | 2.0.0 | Icon components | Auto-imports, tree-shakeable, Nuxt-native, `<LucideSun />` / `<LucideMoon />` pattern |

### Supporting

| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| lucide-vue-next | 0.563.0 | Direct icon imports (peer dep of nuxt-lucide-icons) | Installed automatically with nuxt-lucide-icons |

### Alternatives Considered

| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| nuxt-purgecss | Bulma modular SCSS imports | **Recommended: use modular imports instead.** nuxt-purgecss has Nuxt 4 compatibility issue (#203, Jul 2025), minimally maintained, last release Sep 2022. Modular Bulma imports achieve the same goal with zero dependencies. |
| nuxt-lucide-icons | lucide-vue-next (direct) | Direct imports work but require manual `import { Sun } from 'lucide-vue-next'` in each component. Nuxt module auto-imports. |
| @nuxt/fonts | @nuxtjs/google-fonts | @nuxt/fonts is the newer, officially maintained module with better optimization (fontaine/capsize metrics). |
| @nuxt/fonts | fontsource | fontsource requires manual font file management; @nuxt/fonts handles download, caching, and optimization automatically. |

### Installation

```bash
yarn add bulma@1.0.4 sass @nuxtjs/color-mode @nuxt/fonts
yarn add -D nuxt-lucide-icons
```

**Note:** `sass` is a dependency (not devDependency) because Bulma's SCSS is compiled at build time during `nuxi generate`. Alternatively it can be a devDependency -- Nuxt handles this either way since it's only used during build.

## Architecture Patterns

### Recommended Project Structure

```
app/
├── assets/
│   └── scss/
│       ├── main.scss              # Entry point: imports all partials + Bulma
│       ├── _variables.scss        # Design tokens (colors, spacing, transitions)
│       ├── _bulma-overrides.scss  # Bulma variable overrides + modular imports
│       ├── _base.scss             # Global base styles (links, images, tap targets)
│       └── _dark-mode.scss        # Dark mode custom overrides (warm neutrals)
├── components/
│   └── ThemeToggle.vue            # Sun/moon dark mode toggle button
├── layouts/
│   └── default.vue                # Nav bar + main + footer layout shell
└── pages/
    └── index.vue                  # Homepage (placeholder)
```

### Pattern 1: Bulma Modular SCSS with Variable Overrides

**What:** Import only the Bulma components you need, with variable overrides applied via `@use ... with (...)` syntax.
**When to use:** Always -- this is the primary approach for this project.

```scss
// app/assets/scss/_variables.scss
// Design tokens for DE5.org

// -- Brand colors
$type-s-red: #b81a35;

// -- Dark mode surface colors (warm neutrals, no blue undertone)
$dark-bg-base: #171717;
$dark-bg-surface: #262626;
$dark-bg-elevated: #333333;

// -- Typography
$font-family-primary: 'Inter', 'SF Pro', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;

// -- Spacing scale
$spacing-xs: 0.25rem;
$spacing-sm: 0.5rem;
$spacing-md: 1rem;
$spacing-lg: 1.5rem;
$spacing-xl: 2rem;
$spacing-2xl: 3rem;
$spacing-3xl: 4rem;

// -- Border radius
$radius-default: 0.375rem;
$radius-lg: 0.75rem;

// -- Shadows
$shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.08);
$shadow-card: 0 2px 8px rgba(0, 0, 0, 0.08);

// -- Transitions
$transition-fast: 150ms ease;
$transition-normal: 250ms ease;
$transition-slow: 350ms ease;
```

```scss
// app/assets/scss/_bulma-overrides.scss
// Override Bulma variables, then import only needed modules

@use './variables' as *;

// Override Bulma's utility variables BEFORE importing components
@use 'bulma/sass/utilities' with (
  $primary: $type-s-red,
  $family-primary: $font-family-primary,
  $radius: $radius-default,
  $radius-small: 0.25rem,
  $radius-large: $radius-lg,
  $gap: 32px,
  $block-spacing: 1.5rem
);

// -- Required base: resets + themes (CSS variables)
@forward 'bulma/sass/base';
@forward 'bulma/sass/themes';

// -- Grid
@forward 'bulma/sass/grid/columns';

// -- Elements (import only what's used)
@forward 'bulma/sass/elements/button';
@forward 'bulma/sass/elements/content';
@forward 'bulma/sass/elements/icon';
@forward 'bulma/sass/elements/image';
@forward 'bulma/sass/elements/tag';
@forward 'bulma/sass/elements/title';
@forward 'bulma/sass/elements/box';
@forward 'bulma/sass/elements/table';

// -- Components
@forward 'bulma/sass/components/card';
@forward 'bulma/sass/components/navbar';
@forward 'bulma/sass/components/dropdown';

// -- Form
@forward 'bulma/sass/form';

// -- Layout
@forward 'bulma/sass/layout/container';
@forward 'bulma/sass/layout/footer';
@forward 'bulma/sass/layout/hero';
@forward 'bulma/sass/layout/section';
```

```scss
// app/assets/scss/main.scss
// Entry point: load Bulma overrides, then custom styles

@use './bulma-overrides';
@use './base';
@use './dark-mode';
```

### Pattern 2: nuxt.config.ts Integration

**What:** Register the main SCSS file in Nuxt's css array, and optionally inject variables via additionalData for SFC access.
**When to use:** Always -- this is how the SCSS entry point connects to Nuxt.

```typescript
// nuxt.config.ts additions
export default defineNuxtConfig({
  modules: [
    '@nuxtjs/seo',        // MUST come before @nuxt/content
    '@nuxt/content',
    '@nuxt/eslint',
    '@nuxtjs/color-mode', // Dark mode support
    '@nuxt/fonts',        // Font self-hosting
    'nuxt-lucide-icons',  // Icon auto-imports
  ],

  // Global SCSS entry point
  css: ['~/assets/scss/main.scss'],

  // Make SCSS variables available in Vue SFC <style> blocks
  vite: {
    css: {
      preprocessorOptions: {
        scss: {
          additionalData: '@use "~/assets/scss/variables" as *;',
        },
      },
    },
  },

  // Color mode: system preference with manual toggle
  colorMode: {
    preference: 'system',
    fallback: 'light',
    dataValue: 'theme',       // Sets data-theme="dark" on <html> (Bulma 1.x native)
    classSuffix: '',          // Classes: .dark, .light (no suffix)
    storage: 'localStorage',
    storageKey: 'de5-color-mode',
  },

  // Font configuration
  fonts: {
    defaults: {
      weights: [400, 500, 600, 700],
      styles: ['normal'],
      subsets: ['latin', 'latin-ext'],
    },
  },

  // Lucide icons configuration
  lucide: {
    namePrefix: 'Lucide',
  },
})
```

### Pattern 3: @nuxtjs/color-mode + Bulma Dark Mode Bridge

**What:** Use `dataValue: 'theme'` to bridge @nuxtjs/color-mode with Bulma's built-in `[data-theme=dark]` selector.
**When to use:** This is the critical integration pattern for dark mode.

Bulma 1.x has built-in dark mode support. When the `<html>` element has `data-theme="dark"`, Bulma automatically inverts its CSS variables:

| CSS Variable | Light | Dark |
|---|---|---|
| `--bulma-scheme-main-l` | 100% | 11% |
| `--bulma-background-l` | 96% | 14% |
| `--bulma-text-l` | 29% | 71% |
| `--bulma-border-l` | 86% | 24% |

@nuxtjs/color-mode with `dataValue: 'theme'` sets `data-theme="dark"` or `data-theme="light"` on `<html>`, which Bulma picks up natively. No custom CSS needed for basic dark mode support.

For the warm neutral dark overrides (no blue undertone), use Bulma's `register-vars()` mixin or override the CSS variables in `_dark-mode.scss`.

### Pattern 4: Dark Mode Toggle Component

**What:** Sun/moon toggle using Lucide icons and useColorMode() composable.
**When to use:** In the navbar.

```vue
<!-- app/components/ThemeToggle.vue -->
<template lang="pug">
//- Dark mode toggle button
button.theme-toggle(
  @click="toggle"
  :aria-label="colorMode.value === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'"
  type="button"
)
  //- Show sun icon in dark mode, moon icon in light mode
  LucideSun(v-if="colorMode.value === 'dark'" :size="20")
  LucideMoon(v-else :size="20")
</template>

<script setup lang="ts">
// Dark mode toggle logic
const colorMode = useColorMode()

// Cycle between light and dark modes
const toggle = () => {
  colorMode.preference = colorMode.value === 'dark' ? 'light' : 'dark'
}
</script>

<style lang="scss" scoped>
// Toggle button styling
.theme-toggle {
  background: none;
  border: none;
  cursor: pointer;
  padding: $spacing-sm;
  color: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
  border-radius: $radius-default;
  transition: background-color $transition-fast;

  &:hover {
    background-color: rgba(128, 128, 128, 0.1);
  }
}
</style>
```

### Pattern 5: @nuxt/fonts Auto-Detection

**What:** @nuxt/fonts automatically detects font-family declarations in CSS and downloads/self-hosts fonts.
**When to use:** Just declare `font-family: 'Inter', sans-serif` in your SCSS and @nuxt/fonts handles the rest.

When you set `$family-primary: 'Inter', 'SF Pro', ...` in Bulma's utilities override, @nuxt/fonts detects the "Inter" declaration and automatically:
1. Downloads Inter from Google Fonts at build time
2. Generates optimized `@font-face` rules
3. Serves fonts locally (no external CDN requests)
4. Adds fallback font metrics to prevent layout shift

**Important limitation:** @nuxt/fonts only processes the **first** font in a `font-family` declaration. Subsequent fonts are used for fallback metric generation. This is fine for our use case (Inter is first).

### Anti-Patterns to Avoid

- **Importing all of Bulma:** Don't `@use "bulma"` or `@use "bulma/sass"` as a single import. This includes every component and increases bundle size. Use modular imports.
- **Using `additionalData` for CSS rules:** Only inject variables/mixins via `additionalData`. Actual CSS rules will be duplicated in every component.
- **Using `@import` instead of `@use`:** Sass `@import` is deprecated. Vite 7 uses the modern Sass API exclusively. Use `@use` and `@forward`.
- **Putting SCSS variables in the `css[]` array:** The `css[]` array injects global stylesheets, not SCSS variables. Variables placed here won't be available in SFC `<style>` blocks. Use `additionalData` for that.
- **Manually downloading Inter font files:** Let @nuxt/fonts handle downloading and optimization. Don't manually place `.woff2` files in `public/`.

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Dark mode detection & persistence | Custom `prefers-color-scheme` listener + localStorage | @nuxtjs/color-mode | Handles SSR hydration, system preference detection, storage, flash prevention |
| Font self-hosting | Manual @font-face rules + woff2 files | @nuxt/fonts | Handles metric optimization (CLS prevention), caching, build-time download |
| Icon system | Custom SVG sprite or inline SVGs | nuxt-lucide-icons | Auto-imports, tree-shaking, consistent API, 1500+ icons |
| CSS reset | Custom reset stylesheet | Bulma's built-in minireset (`bulma/sass/base`) | Included with Bulma, tested against all Bulma components |
| Responsive breakpoints | Custom media query variables | Bulma's built-in breakpoints | Already defined in Bulma utilities, used by all Bulma components |
| CSS purging | nuxt-purgecss | Bulma modular SCSS imports | nuxt-purgecss has Nuxt 4 compat issues; modular imports achieve same goal natively |

**Key insight:** Bulma 1.x has evolved significantly from 0.x. It now includes built-in dark mode, CSS variables, themes, and modular imports. Many things that required external tools in the 0.x era are now built in.

## Common Pitfalls

### Pitfall 1: nuxt-purgecss Nuxt 4 Incompatibility
**What goes wrong:** nuxt-purgecss (last released Sep 2022, v2.0.0) has a known compatibility issue with Nuxt 4 (GitHub issue #203, Jul 2025). The module is minimally maintained.
**Why it happens:** Nuxt 4 changed internal module APIs and directory structure. The module hasn't been updated.
**How to avoid:** Use Bulma's modular SCSS imports instead. Import only the components you actually use. This achieves the same bundle size reduction without a separate dependency.
**Warning signs:** Build errors or PostCSS errors mentioning purgecss after adding the module.

### Pitfall 2: Sass @import Deprecation with Vite 7
**What goes wrong:** Using `@import` in SCSS files causes deprecation warnings or errors with Vite 7's modern Sass API.
**Why it happens:** Vite 6+ removed support for the Sass legacy API. Vite 7 (bundled with Nuxt 4.3) only supports the modern API where `@use` and `@forward` replace `@import`.
**How to avoid:** Always use `@use` for loading modules with namespaces, and `@forward` for re-exporting from entry files. Never use `@import`.
**Warning signs:** Sass deprecation warnings in terminal, or `Error: @import rules are not allowed` errors.

### Pitfall 3: additionalData CSS Duplication
**What goes wrong:** Putting actual CSS rules (not just variables/mixins) in `additionalData` causes them to be duplicated in every Vue SFC style block.
**Why it happens:** Vite's `additionalData` prepends content to EVERY SCSS file before compilation. Variables are fine (they don't generate CSS output), but rules get duplicated.
**How to avoid:** Only put `@use "~/assets/scss/variables" as *;` in `additionalData`. All actual CSS (including Bulma imports) goes in `main.scss` registered via the `css[]` array.
**Warning signs:** Dramatically inflated CSS bundle, duplicate selectors in browser devtools.

### Pitfall 4: @use Namespace Isolation with additionalData
**What goes wrong:** Variables injected via `additionalData` using `@use` are available in component `<style>` blocks, but NOT in SCSS files imported by those components.
**Why it happens:** `@use` creates isolated namespaces. The `additionalData` is prepended to the component's style block, but imported partials have their own scope.
**How to avoid:** Use `as *` to expose all members without namespace prefix. For deeply nested SCSS imports, each file must explicitly `@use` what it needs.
**Warning signs:** "Undefined variable" errors in SCSS partials that work fine in SFC style blocks.

### Pitfall 5: @nuxtjs/color-mode Class vs Data Attribute Mismatch with Bulma
**What goes wrong:** @nuxtjs/color-mode applies `.dark-mode` class but Bulma expects `[data-theme=dark]` attribute.
**Why it happens:** Default @nuxtjs/color-mode config uses class-based theming (`.dark-mode`), while Bulma 1.x uses `[data-theme=dark]` or `.theme-dark` selectors.
**How to avoid:** Set `dataValue: 'theme'` in colorMode config. This makes @nuxtjs/color-mode set `data-theme="dark"` on `<html>`, which Bulma natively understands.
**Warning signs:** Dark mode toggle works (class changes) but Bulma components don't change appearance.

### Pitfall 6: Module Order in nuxt.config.ts
**What goes wrong:** Adding new modules in the wrong position breaks existing functionality.
**Why it happens:** @nuxtjs/seo MUST come before @nuxt/content (documented project gotcha). New modules should not break this order.
**How to avoid:** Add new modules (@nuxtjs/color-mode, @nuxt/fonts, nuxt-lucide-icons) AFTER @nuxt/eslint. The order within the new modules is not critical, but the seo-before-content order must be preserved.
**Warning signs:** SEO metadata stops working after adding modules.

### Pitfall 7: Bulma Navbar JavaScript Requirements
**What goes wrong:** Bulma's hamburger menu toggle (mobile) requires JavaScript to add/remove the `.is-active` class.
**Why it happens:** Bulma is CSS-only. The responsive navbar collapse needs a JS click handler to toggle the `.is-active` class on both the burger button and the navbar-menu element.
**How to avoid:** Add a Vue click handler in the layout component that toggles the `.is-active` class. This is a standard pattern documented in Bulma's navbar docs.
**Warning signs:** Hamburger icon appears on mobile but clicking it does nothing.

### Pitfall 8: Dark Mode Flash (FOUC)
**What goes wrong:** Page briefly shows light mode before switching to dark on load.
**Why it happens:** SSR renders HTML without the dark mode attribute; client-side JavaScript then applies it.
**How to avoid:** @nuxtjs/color-mode injects an inline script in `<head>` that reads localStorage and sets the data-theme attribute before first paint. Make sure the module is properly registered and `storage: 'localStorage'` is set.
**Warning signs:** Brief flash of light theme on page load when dark mode is selected.

## Code Examples

### Dark Mode Custom Overrides (Warm Neutrals)

```scss
// app/assets/scss/_dark-mode.scss
// Custom dark mode overrides for warm neutral backgrounds
// Bulma's default dark mode uses slightly blue-tinted darks; we override with warm neutrals

@use './variables' as *;

// Override Bulma's dark theme CSS variables for warm neutral palette
[data-theme='dark'] {
  // Warm neutral backgrounds (no blue undertone)
  --bulma-scheme-main: #{$dark-bg-base};
  --bulma-scheme-main-bis: #{$dark-bg-surface};
  --bulma-scheme-main-ter: #{$dark-bg-elevated};
  --bulma-background: #{$dark-bg-surface};

  // Adjust border and shadow for dark mode
  --bulma-border: rgba(255, 255, 255, 0.12);
  --bulma-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}
```

### Base Styles

```scss
// app/assets/scss/_base.scss
// Global base styles applied on top of Bulma's minireset

@use './variables' as *;

// -- Link styling: accent color, no underline, underline on hover
a:not(.button):not(.navbar-item):not(.tag) {
  color: $type-s-red;
  text-decoration: none;
  transition: color $transition-fast, text-decoration $transition-fast;

  &:hover {
    text-decoration: underline;
  }
}

// -- Responsive images: constrain to container
img {
  max-width: 100%;
  height: auto;
}

// -- Touch-friendly tap targets
button,
a,
[role='button'] {
  min-height: 44px;
  min-width: 44px;
}

// -- Smooth transitions for theme changes
*,
*::before,
*::after {
  transition: background-color $transition-normal, color $transition-normal, border-color $transition-normal;
}
```

### Navbar Layout with Bulma

```vue
<!-- app/layouts/default.vue (structure example) -->
<template lang="pug">
div
  //- Site navigation
  nav.navbar.is-fixed-top(role="navigation" aria-label="main navigation")
    .container
      .navbar-brand
        NuxtLink.navbar-item(to="/")
          strong DE5.org
        //- Mobile hamburger toggle
        a.navbar-burger(
          role="button"
          aria-label="menu"
          :aria-expanded="menuOpen"
          :class="{ 'is-active': menuOpen }"
          @click="menuOpen = !menuOpen"
        )
          span(aria-hidden="true")
          span(aria-hidden="true")
          span(aria-hidden="true")
          span(aria-hidden="true")
      .navbar-menu(:class="{ 'is-active': menuOpen }")
        .navbar-end
          .navbar-item
            ThemeToggle

  //- Page content
  main
    slot

  //- Site footer
  footer.footer
    .content.has-text-centered
      p &copy; {{ new Date().getFullYear() }} DE5.org
</template>

<script setup lang="ts">
// Layout state
const menuOpen = ref(false)
</script>
```

### Content Wrapper for Markdown

```vue
<!-- Wrapping Nuxt Content rendered markdown with Bulma's .content class -->
<template lang="pug">
.content
  ContentRenderer(:value="doc")
</template>
```

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|---|---|---|---|
| Sass `@import` | Sass `@use` / `@forward` | Dart Sass 1.x (deprecated), Vite 6+ (enforced) | Must use `@use` for all Bulma imports; `@import` will error in Vite 7 |
| Bulma 0.x (no CSS vars) | Bulma 1.0 (CSS variables + themes) | Bulma 1.0.0 (2024) | Dark mode built-in, no need for third-party dark mode Bulma extensions |
| nuxt-purgecss for bundle size | Bulma modular imports | Bulma 1.0 | Import only needed modules; eliminates need for PurgeCSS |
| @nuxtjs/google-fonts | @nuxt/fonts | 2024 | More providers, better optimization, official Nuxt module |
| Manual SVG icons | nuxt-lucide-icons | 2024 | Auto-import, tree-shaking, no manual imports needed |
| Custom dark mode JS | @nuxtjs/color-mode v4 | Nov 2025 | Handles SSR, FOUC prevention, storage, system preference |

**Deprecated/outdated:**
- `@import` in SCSS: Deprecated by Dart Sass, removed in Vite 7 modern API
- `nuxt-purgecss`: Minimally maintained, Nuxt 4 compat issues
- `pug-plain-loader`: Not needed with Vite (handles Pug natively)
- `@nuxtjs/google-fonts`: Superseded by @nuxt/fonts for new projects

## Open Questions

1. **nuxt-purgecss vs modular imports**
   - What we know: nuxt-purgecss has a Nuxt 4 compatibility issue. Bulma modular imports achieve the same goal.
   - What's unclear: The user explicitly requested PurgeCSS in their locked decisions.
   - Recommendation: Present the nuxt-purgecss compatibility issue to the user and recommend modular imports as the alternative. If user insists on PurgeCSS, it can be attempted but may require workarounds or waiting for a module update.

2. **Bulma dark mode warm neutral overrides**
   - What we know: Bulma's dark theme uses `--bulma-scheme-main-l: 11%` which maps to approximately `hsl(221, 14%, 11%)` -- this has a slight blue undertone from Bulma's default hue.
   - What's unclear: The exact CSS variable overrides needed to achieve warm neutral (#171717) dark backgrounds while keeping all other Bulma dark mode behavior intact.
   - Recommendation: Override `--bulma-scheme-main`, `--bulma-scheme-main-bis`, `--bulma-scheme-main-ter`, and `--bulma-background` with explicit hex values in `[data-theme='dark']` selector. Test to ensure all Bulma components still look correct. May need to also override `--bulma-scheme-main-l` and related lightness variables.

3. **Max content width**
   - What we know: Bulma's `.container` has built-in max-widths: 960px (desktop), 1152px (widescreen), 1344px (fullhd). The user suggested ~1024px.
   - What's unclear: Whether to override Bulma's container widths or use a custom wrapper.
   - Recommendation: Use Bulma's default `.container` which maxes at 960px on desktop -- this is close to the 1024px target and avoids overriding Bulma defaults. For content-heavy pages, the narrower 960px improves readability.

4. **@nuxt/fonts font weights**
   - What we know: Inter supports weights 100-900. The project needs regular (400), medium (500), semibold (600), bold (700) for strong hierarchy.
   - What's unclear: Whether more weights are needed.
   - Recommendation: Configure `weights: [400, 500, 600, 700]` initially. Add more later if needed.

## Sources

### Primary (HIGH confidence)
- [Bulma official docs: Customize with Sass](https://bulma.io/documentation/customize/with-sass/) - SCSS override pattern, variable names
- [Bulma official docs: Modular Sass](https://bulma.io/documentation/customize/with-modular-sass/) - Per-component import paths
- [Bulma official docs: Dark Mode](https://bulma.io/documentation/features/dark-mode/) - data-theme attribute, CSS variable inversion, mixins
- [Bulma official docs: Themes](https://bulma.io/documentation/features/themes/) - Theme system, CSS variable architecture
- [Bulma official docs: Sass Variables](https://bulma.io/documentation/customize/list-of-sass-variables/) - Variable defaults ($primary, $family-primary, etc.)
- [Bulma official docs: Content element](https://bulma.io/documentation/elements/content/) - .content class for markdown
- [Bulma releases (GitHub)](https://github.com/jgthms/bulma/releases) - Latest version: 1.0.4 (Apr 2024)
- [@nuxtjs/color-mode official docs: Configuration](https://color-mode.nuxtjs.org/usage/configuration) - All config options, dataValue
- [@nuxtjs/color-mode official docs: Basic Usage](https://color-mode.nuxtjs.org/usage/basic) - useColorMode(), preference, value
- [@nuxtjs/color-mode GitHub](https://github.com/nuxt-modules/color-mode) - v4.0.0, Nuxt 3+ compat
- [Nuxt 4 Styling docs](https://nuxt.com/docs/4.x/getting-started/styling) - css array, vite preprocessorOptions
- [Lucide Vue Next docs](https://lucide.dev/guide/packages/lucide-vue-next) - Props, tree-shaking, usage
- [nuxt-lucide-icons (Nuxt modules)](https://nuxt.com/modules/lucide-icons) - v2.0.0, auto-import config
- [@nuxt/fonts docs: Configuration](https://fonts.nuxt.com/get-started/configuration) - Weights, styles, subsets, providers
- [@nuxt/fonts docs: Usage](https://fonts.nuxt.com/get-started/usage) - Auto-detection, CSS integration
- [@nuxt/fonts docs: Providers](https://fonts.nuxt.com/get-started/providers) - Google, local, fontsource providers

### Secondary (MEDIUM confidence)
- [Vite discussions #18388](https://github.com/vitejs/vite/discussions/18388) - SCSS @use with additionalData patterns
- [Vite discussions #12549](https://github.com/vitejs/vite/discussions/12549) - additionalData best practices
- [Nuxt issue #28015](https://github.com/nuxt/nuxt/issues/28015) - css[] vs additionalData behavior difference
- [nuxt-purgecss GitHub issues](https://github.com/Developmint/nuxt-purgecss/issues) - Issue #203 (Nuxt 4 compat), maintenance status
- [color-mode issue #153](https://github.com/nuxt-community/color-mode-module/issues/153) - dataValue configuration details

### Tertiary (LOW confidence)
- [kensixx/nuxt-color-mode-with-bulma](https://github.com/kensixx/nuxt-color-mode-with-bulma) - Community integration guide (older, Nuxt 2 era)

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH - All packages verified via official docs and npm registry
- Architecture (SCSS patterns): HIGH - Verified via Bulma docs + Vite discussions + Nuxt docs
- Architecture (color-mode + Bulma bridge): HIGH - Verified via official color-mode docs (dataValue option) + Bulma dark mode docs (data-theme attribute)
- Pitfalls: HIGH - nuxt-purgecss issue verified on GitHub; Sass @import deprecation verified via Vite docs; additionalData behavior verified via Nuxt issues
- Dark mode warm neutral overrides: MEDIUM - CSS variable override approach is sound but exact variables to override may need testing

**Research date:** 2026-02-09
**Valid until:** 2026-03-09 (stable libraries, 30-day validity)
