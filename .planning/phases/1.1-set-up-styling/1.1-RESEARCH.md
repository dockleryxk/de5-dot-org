# Phase 1.1: Set Up Styling - Research

**Researched:** 2026-02-09
**Domain:** CSS framework (Bulma SCSS), dark mode, typography, icons, responsive layout
**Confidence:** HIGH

<user_constraints>

## User Constraints (from CONTEXT.md)

### Locked Decisions

- **CSS Framework:** Bulma via SCSS -- not Tailwind, Bootstrap, or plain CSS
- **PurgeCSS:** `nuxt-purgecss` to strip unused Bulma classes at build time
- **SCSS preprocessor:** `sass` package (Vite handles natively)
- **Primary accent:** `#b81a35` (Type S red, `hsl(350, 75%, 41%)`) -- defined as single SCSS variable
- **Light mode:** Clean/minimal -- white/light backgrounds, neutral tones, content-forward
- **Dark mode:** Warm neutral darks (~#171717 base = `hsl(0, 0%, 9%)`, ~#262626 surfaces = `hsl(0, 0%, 15%)`) -- no blue undertone
- **Acura red usage:** Sparingly -- links, buttons, hover states, interactive elements only
- **Typography:** Inter (Google Font, self-hosted) with system font fallback
- **Icons:** Lucide -- clean line icons, tree-shakeable
- **Dark mode trigger:** Defaults to system preference, user override with manual toggle
- **Toggle location:** Nav bar (sun/moon icon), preference stored in localStorage
- **Link styling:** Accent color text, no underline by default, underline on hover
- **Card/surface styling:** Subtle borders + rounded corners
- **Motion:** Subtle transitions -- define transition variables for hover, dark mode toggle, page transitions
- **SCSS architecture:** Partials `_variables.scss`, `_bulma-overrides.scss`, `_base.scss`, `_dark-mode.scss` imported into `main.scss`
- **Override Bulma variables** directly -- set `$primary`, `$family-sans-serif`, etc. BEFORE importing Bulma
- **Component styling:** Bulma global classes for layout/base + Vue SFC `<style lang="scss" scoped>` for component-specific
- **Bulma `.content` class** configured to auto-style Nuxt Content rendered markdown
- **Code blocks:** Basic styling only (monospace, background, padding) -- no syntax highlighting
- **Layout shell:** Basic `default.vue` with nav bar + main content area + footer skeleton
- **Hamburger menu** on mobile (Bulma's built-in navbar collapse)
- **Dark mode toggle** in nav bar
- **Mobile-first** CSS (min-width media queries, Bulma's natural approach)
- **Bulma's default breakpoints:** mobile (<769px), tablet (769px+), desktop (1024px+), widescreen (1216px+), fullhd (1408px+)
- **Responsive media defaults:** Global `max-width: 100%`, `height: auto` for images
- **Touch-friendly tap targets:** Minimum 44px for buttons/links on mobile
- **Reference sites:** nuxt.com and content.nuxt.com

### Claude's Discretion

- Spacing/density: generous for landing pages, tighter for content-dense FAQ pages
- Max content width choice (likely ~1024px based on reference sites)
- Exact transition durations and easing curves
- Loading skeleton design if applicable
- Specific Bulma module imports (only import what's needed)

### Deferred Ideas (OUT OF SCOPE)

- Phase 8 (Visual Polish): Revisit and confirm Type S red brand color choice across all three reference values
- Phase 8 (Visual Polish): Revisit dark mode background palette to confirm warm neutral direction

</user_constraints>

## Summary

This phase establishes the complete styling infrastructure for DE5.org using Bulma v1.0.4 with SCSS customization, a warm neutral dark mode, self-hosted Inter font, and Lucide icons. The technical approach is well-supported: Bulma v1 has native SCSS support with a modern CSS variable system that makes dark mode theming straightforward. The `@nuxt/fonts` module handles self-hosting Inter from Google Fonts automatically (downloads at build time, serves locally via `/_fonts`). The `@nuxtjs/color-mode` module provides the dark mode toggle with localStorage persistence and sets `data-theme="dark"` on `<html>`, which is exactly the attribute Bulma v1 uses for theme switching.

The most critical technical insight is that Bulma v1's default scheme hue is `$scheme-h: 221` (blue) with `$scheme-s: 14%` saturation. The user wants warm neutral dark backgrounds (#171717 = `hsl(0, 0%, 9%)`), which means we must override `--bulma-scheme-h` to 0 and `--bulma-scheme-s` to 0% in the dark theme CSS to eliminate the blue undertone. Bulma v1 constructs all scheme colors from these two variables plus lightness values, so this single override propagates correctly throughout the framework.

Regarding nuxt-purgecss: the module was last released as v2.0.0 in September 2022. There is an open Nuxt 4 compatibility issue (#203, July 2025) and a merged PR (#199, August 2025) indicating some compatibility work. An active Renovate PR (#204, January 2026) is updating deps for Nuxt 4. The module works as a PostCSS plugin and may function with Nuxt 4, but requires testing and a safelist for dynamic Bulma classes. As a fallback strategy, Bulma's modular SCSS imports can achieve similar bundle reduction without PurgeCSS.

**Primary recommendation:** Use Bulma v1 with `@use`/`@forward` SCSS syntax, `@nuxtjs/color-mode` configured with `dataValue: 'theme'` for Bulma integration, `@nuxt/fonts` for zero-config Inter self-hosting, and nuxt-purgecss with a Bulma-aware safelist (with modular Bulma imports as fallback if PurgeCSS has issues).

## Standard Stack

### Core

| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| bulma | 1.0.4 | CSS framework | SCSS-native, semantic classes, CSS variable theming, built-in dark mode via `data-theme`, `.content` class for markdown |
| sass | ^1.97 | SCSS compiler | Dart Sass, required by Bulma v1, Vite handles natively |
| @nuxtjs/color-mode | 4.0.0 | Dark mode toggle | SSR-safe, localStorage, `dataValue: 'theme'` for `data-theme` attribute (Bulma-compatible), system preference detection |
| @nuxt/fonts | 0.12.1 | Font management | Auto-downloads Google Fonts at build, serves locally via `/_fonts`, zero external CDN requests |
| nuxt-lucide-icons | 2.0.0 | Icon components | Auto-imports Lucide icons as Vue components, tree-shakeable |

### Supporting

| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| nuxt-purgecss | 2.0.0 | CSS tree-shaking | Production builds (disabled in dev by default), strips unused Bulma classes. Has open Nuxt 4 compat issue -- test during setup, fall back to modular imports if needed. |

### Alternatives Considered

| Instead of | Could Use | Tradeoff |
|------------|-----------|----------|
| nuxt-purgecss | Bulma modular SCSS imports only | Achieves similar result without dependency risk. Less automated but more reliable with Nuxt 4. |
| @nuxt/fonts | Manual font files in public/ | More control but no auto-optimization, must manually handle @font-face, subsetting |
| @nuxtjs/color-mode | Custom composable | Would need to handle SSR flash, localStorage, system preference detection manually |
| nuxt-lucide-icons | Direct lucide-vue-next imports | Works but no auto-import, must import each icon manually |

**Installation:**

```bash
yarn add bulma @nuxtjs/color-mode @nuxt/fonts nuxt-lucide-icons
yarn add -D sass nuxt-purgecss
```

## Architecture Patterns

### Recommended Project Structure

```
app/
  assets/
    scss/
      main.scss                # Entry point: imports all partials + Bulma
      _variables.scss          # Design tokens (colors, spacing, shadows, transitions, typography)
      _bulma-overrides.scss    # Bulma variable overrides using @use ... with ()
      _base.scss               # Global base styles (links, images, code blocks, tap targets)
      _dark-mode.scss          # Dark mode warm neutral overrides
  components/
    ThemeToggle.vue            # Sun/moon dark mode toggle button
  layouts/
    default.vue                # Nav bar + main content area + footer layout shell
  pages/
    index.vue                  # Homepage (existing, will get styled)
```

### Pattern 1: Bulma SCSS Override with @use (Modern Sass Module System)

**What:** Override Bulma's Sass variables before Bulma compiles, using the `@use ... with ()` syntax (not deprecated `@import`).
**When to use:** Always -- this is the correct way to customize Bulma v1.

```scss
// app/assets/scss/main.scss
// Entry point: Bulma with overrides, then custom styles

// Import Bulma with our variable overrides
@use 'bulma-overrides';

// Custom base styles (links, images, code blocks)
@use 'base';

// Dark mode warm neutral overrides
@use 'dark-mode';
```

```scss
// app/assets/scss/_bulma-overrides.scss
// Override Bulma defaults, import Bulma

@use 'variables' as vars;

// Override Bulma's Sass variables BEFORE it compiles
// Source: https://bulma.io/documentation/customize/with-sass/
@use 'bulma/sass' with (
  $primary: vars.$type-s-red,
  $family-primary: vars.$font-family-primary,
  $scheme-h: 0,     // Warm neutral (default is 221 = blue)
  $scheme-s: 0%     // Zero saturation for pure neutrals
);
```

Source: [Bulma Sass customization docs](https://bulma.io/documentation/customize/with-sass/)

**Important:** The `@use ... with ()` syntax can only be used ONCE per module. All overrides for `bulma/sass` must be in a single `@use` statement.

### Pattern 2: nuxt.config.ts Integration

**What:** Register modules, global CSS, and SCSS preprocessor options.
**When to use:** Always -- this is the Nuxt configuration.

```typescript
// nuxt.config.ts -- additions for Phase 1.1
export default defineNuxtConfig({
  modules: [
    '@nuxtjs/seo',         // MUST come before @nuxt/content (existing)
    '@nuxt/content',       // Existing
    '@nuxt/fonts',         // Font self-hosting
    '@nuxtjs/color-mode',  // Dark mode toggle
    'nuxt-lucide-icons',   // Icon auto-imports
    '@nuxt/eslint',        // Existing
    'nuxt-purgecss',       // CSS purging -- last (PostCSS plugin)
  ],

  // Global SCSS entry point
  css: ['~/assets/scss/main.scss'],

  // Dark mode configuration
  colorMode: {
    preference: 'system',     // Default to system preference
    fallback: 'light',        // Fallback if no preference detected
    classSuffix: '',           // .dark / .light classes (no suffix)
    dataValue: 'theme',        // Sets data-theme="dark" on <html> (Bulma uses this)
    storage: 'localStorage',
    storageKey: 'de5-color-mode',
  },

  // Font configuration -- @nuxt/fonts auto-detects 'Inter' from CSS
  fonts: {
    defaults: {
      weights: [400, 500, 600, 700],
      styles: ['normal'],
      subsets: ['latin', 'latin-ext'],
    },
  },

  // Lucide icons configuration
  lucide: {
    namePrefix: 'Lucide',     // <LucideSun />, <LucideMoon />, etc.
  },

  // Make SCSS variables available in all SFC <style lang="scss"> blocks
  vite: {
    css: {
      preprocessorOptions: {
        scss: {
          additionalData: '@use "~/assets/scss/variables" as vars;',
        },
      },
    },
  },

  // PurgeCSS configuration with Bulma safelist
  purgecss: {
    safelist: {
      standard: [
        'is-active', 'is-loading', 'is-clipped', 'is-hidden-mobile',
        'is-hidden-tablet', 'is-hidden-desktop',
      ],
      deep: [/^navbar/, /^theme-/, /^has-background-/, /^has-text-/],
      greedy: [/data-theme/],
    },
  },
})
```

Source: [Nuxt 4 styling docs](https://nuxt.com/docs/4.x/getting-started/styling), [@nuxtjs/color-mode config](https://color-mode.nuxtjs.org/usage/configuration)

### Pattern 3: @nuxtjs/color-mode + Bulma Dark Mode Bridge

**What:** Use `dataValue: 'theme'` to bridge @nuxtjs/color-mode with Bulma's built-in `[data-theme=dark]` selector.
**When to use:** This is the critical integration pattern for dark mode.

Bulma 1.x has built-in dark mode. When `<html>` has `data-theme="dark"`, Bulma inverts CSS variables:

| CSS Variable | Light | Dark |
|---|---|---|
| `--bulma-scheme-main-l` | 100% | 9% (we override from default 11%) |
| `--bulma-background-l` | 96% | 14% |
| `--bulma-text-l` | 29% | 71% |
| `--bulma-text-title-l` | 14% | 100% |
| `--bulma-border-l` | 86% | 24% |

@nuxtjs/color-mode with `dataValue: 'theme'` sets `data-theme="dark"` on `<html>`, which Bulma picks up natively.

Source: [Bulma dark mode docs](https://bulma.io/documentation/features/dark-mode/), [@nuxtjs/color-mode docs](https://color-mode.nuxtjs.org/usage/configuration)

### Pattern 4: Warm Neutral Dark Theme Override

**What:** Override Bulma's default dark scheme colors (blue-tinted hue 221) with warm neutrals (hue 0, saturation 0%).
**When to use:** In `_dark-mode.scss` to achieve #171717 base / #262626 surface backgrounds.

```scss
// app/assets/scss/_dark-mode.scss
// Override Bulma dark theme for warm neutral backgrounds
// Default Bulma dark: $scheme-h: 221 (blue), $scheme-s: 14%
// Target: #171717 = hsl(0, 0%, 9%), #262626 = hsl(0, 0%, 15%)

// The $scheme-h: 0 and $scheme-s: 0% override in _bulma-overrides.scss handles
// the Sass-level override. This file overrides the CSS variables for the dark
// theme to ensure warm neutral backgrounds at runtime.

[data-theme='dark'],
.theme-dark {
  // Zero hue/saturation for warm neutral (no blue undertone)
  --bulma-scheme-h: 0;
  --bulma-scheme-s: 0%;

  // Custom lightness values for warm neutral palette
  --bulma-scheme-main-l: 9%;          // #171717 (page background)
  --bulma-scheme-main-bis-l: 12%;     // slightly lighter surface
  --bulma-scheme-main-ter-l: 15%;     // #262626 equivalent (card/elevated surfaces)
  --bulma-background-l: 15%;          // #262626 for backgrounds
}

// System preference fallback (for users who haven't toggled manually)
@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) {
    --bulma-scheme-h: 0;
    --bulma-scheme-s: 0%;
    --bulma-scheme-main-l: 9%;
    --bulma-scheme-main-bis-l: 12%;
    --bulma-scheme-main-ter-l: 15%;
    --bulma-background-l: 15%;
  }
}
```

Source: [Bulma initial-variables.scss](https://github.com/jgthms/bulma/blob/main/sass/utilities/initial-variables.scss) (default `$scheme-h: 221`, `$scheme-s: 14%`), [Bulma dark.scss theme](https://github.com/jgthms/bulma/blob/main/sass/themes/dark.scss)

### Pattern 5: Navbar with Burger Toggle and Theme Toggle

**What:** Bulma's navbar requires JavaScript to toggle `is-active` class on mobile. Includes dark mode toggle.
**When to use:** In the default layout.

```vue
<!-- app/layouts/default.vue -->
<template lang="pug">
div
  //- Site navigation
  nav.navbar.is-fixed-top(role="navigation" aria-label="main navigation")
    .container
      .navbar-brand
        NuxtLink.navbar-item(to="/")
          strong DE5.org
        //- Mobile hamburger toggle
        a.navbar-burger(
          role="button"
          aria-label="menu"
          :aria-expanded="menuOpen"
          :class="{ 'is-active': menuOpen }"
          @click="menuOpen = !menuOpen"
        )
          span(aria-hidden="true")
          span(aria-hidden="true")
          span(aria-hidden="true")
          span(aria-hidden="true")
      .navbar-menu(:class="{ 'is-active': menuOpen }")
        .navbar-end
          NuxtLink.navbar-item(to="/") Home
          .navbar-item
            ThemeToggle

  //- Page content with top padding for fixed navbar
  main.section
    .container
      slot

  //- Site footer
  footer.footer
    .content.has-text-centered
      p &copy; {{ new Date().getFullYear() }} DE5.org
</template>

<script setup lang="ts">
// Mobile menu toggle state
const menuOpen = ref(false)
</script>
```

Source: [Bulma navbar docs](https://bulma.io/documentation/components/navbar/)

### Pattern 6: @nuxt/fonts Auto-Detection for Self-Hosted Inter

**What:** @nuxt/fonts auto-detects font-family declarations in CSS and self-hosts fonts at build time.
**When to use:** Just declare Inter in the Bulma `$family-primary` override; @nuxt/fonts handles the rest.

When `$family-primary` includes `'Inter'`, @nuxt/fonts:
1. Detects the font-family declaration in compiled CSS
2. Downloads Inter from Google Fonts provider at build time
3. Generates optimized `@font-face` rules with font-display: swap
4. Serves fonts locally via `/_fonts/` path (no external CDN requests)
5. Adds fallback font metrics to prevent layout shift (CLS optimization)

Source: [@nuxt/fonts providers](https://fonts.nuxt.com/get-started/providers), [@nuxt/fonts advanced](https://fonts.nuxt.com/advanced)

### Anti-Patterns to Avoid

- **Using `@import` instead of `@use`:** Sass `@import` is deprecated since Dart Sass 1.80.0. Bulma v1 uses `@use`/`@forward`.
- **Importing Bulma after variable overrides:** Variables MUST be passed in the `@use ... with ()` statement, not set independently before import.
- **Using `additionalData` for CSS rules:** Only inject variables/mixins via `additionalData`. Actual CSS rules get duplicated in every component.
- **Manually downloading Inter font files:** Let @nuxt/fonts handle it. Don't place `.woff2` files in `public/`.
- **Setting `$primary` as a CSS variable directly:** Use the Sass variable override. Bulma generates the full CSS variable palette from it.
- **Using node-sass:** Fully deprecated. Use `sass` (Dart Sass).

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Dark mode detection & persistence | Custom `prefers-color-scheme` listener + localStorage | `@nuxtjs/color-mode` | Handles SSR hydration, system preference, storage, FOUC prevention |
| Font self-hosting | Manual @font-face rules + woff2 files | `@nuxt/fonts` | Handles metric optimization (CLS), caching, build-time download |
| Icon system | SVG sprites or manual SVG imports | `nuxt-lucide-icons` | Auto-import, tree-shaking, consistent API, 1500+ icons |
| CSS reset | Custom reset stylesheet | Bulma's built-in minireset (`bulma/sass/base`) | Included with Bulma, tested against all components |
| Responsive breakpoints | Custom media query variables | Bulma's built-in breakpoints | Used by all Bulma components consistently |
| Navbar mobile toggle | Custom JS drawer | Bulma navbar + `is-active` class + single ref | All responsive CSS is built in, only needs one boolean |

**Key insight:** Bulma 1.x has evolved significantly from 0.x. It now includes built-in dark mode, CSS variables, themes, and a complete design system. Many things that required external tools in the 0.x era are now built in.

## Common Pitfalls

### Pitfall 1: Blue-Tinted Dark Mode Backgrounds

**What goes wrong:** Dark mode has a subtle blue/slate tint instead of warm neutral.
**Why it happens:** Bulma's default `$scheme-h` is 221 (blue) with 14% saturation. ALL dark mode scheme colors inherit this hue.
**How to avoid:** Override at both levels: (1) `$scheme-h: 0` and `$scheme-s: 0%` in the `@use "bulma/sass" with (...)` statement, and (2) `--bulma-scheme-h: 0` and `--bulma-scheme-s: 0%` in the `[data-theme='dark']` CSS rule.
**Warning signs:** Dark backgrounds appear slightly blue when compared to a pure #171717 swatch.

### Pitfall 2: PurgeCSS Stripping Dynamic Bulma Classes

**What goes wrong:** Bulma classes used conditionally (e.g., `is-active`, `is-loading`, `is-hidden-mobile`) get purged because PurgeCSS cannot analyze JavaScript logic.
**Why it happens:** PurgeCSS does static text analysis. Classes in `:class="{ 'is-active': menuOpen }"` bindings or dynamically constructed class strings may not be detected.
**How to avoid:** Add a safelist in `nuxt-purgecss` config covering dynamic Bulma classes (see Pattern 2 above). Use regex patterns for prefixed classes.
**Warning signs:** Navbar mobile menu doesn't expand, responsive helpers fail, dark mode classes don't apply.

### Pitfall 3: nuxt-purgecss Nuxt 4 Compatibility

**What goes wrong:** nuxt-purgecss may fail to load or cause build errors with Nuxt 4.
**Why it happens:** The module was last released as v2.0.0 in September 2022. There is an open Nuxt 4 compatibility issue (#203, July 2025). A compatibility PR (#199) was merged in August 2025, and a deps update PR (#204) is in progress.
**How to avoid:** Test nuxt-purgecss early in the implementation. If it fails, fall back to Bulma modular SCSS imports (import only needed components instead of all of Bulma). This achieves similar bundle reduction without the dependency.
**Warning signs:** Module load errors, PostCSS errors, or styles missing in production but working in dev.

### Pitfall 4: FOUC (Flash of Unstyled Content) on Dark Mode

**What goes wrong:** Page briefly flashes light theme before dark mode applies.
**Why it happens:** CSS loads before JavaScript hydrates. Without prevention, `data-theme` is not set until client JS runs.
**How to avoid:** `@nuxtjs/color-mode` injects an inline script in `<head>` that reads localStorage and sets the data-theme attribute before first paint. Ensure the module is properly installed and configured.
**Warning signs:** Brief white flash on page load when user prefers dark mode.

### Pitfall 5: Sass @import Deprecation Warnings

**What goes wrong:** Build output filled with deprecation warnings about `@import`.
**Why it happens:** Using `@import` syntax instead of `@use`/`@forward`. Dart Sass 1.80+ emits warnings. Vite uses the modern Sass API.
**How to avoid:** Use `@use` and `@forward` exclusively. Bulma v1 supports the modern module system natively.
**Warning signs:** Console warnings mentioning "Sass @import rules are deprecated."

### Pitfall 6: SCSS Variables Not Available in SFC Scoped Styles

**What goes wrong:** `vars.$type-s-red` or other custom SCSS variables are undefined in `<style lang="scss" scoped>` blocks.
**Why it happens:** Each SFC style block is compiled independently. Global SCSS files loaded via `css: []` are not injected into SFC compilation context.
**How to avoid:** Use Vite's `preprocessorOptions.scss.additionalData` to inject the variables partial:
```typescript
vite: {
  css: {
    preprocessorOptions: {
      scss: {
        additionalData: '@use "~/assets/scss/variables" as vars;',
      },
    },
  },
},
```
Then reference as `vars.$type-s-red` in SFC styles.
**Warning signs:** Build errors: "Undefined variable" in .vue files.

### Pitfall 7: @nuxtjs/color-mode Class vs Data Attribute Mismatch

**What goes wrong:** Toggle works (preference saved) but Bulma components don't change appearance.
**Why it happens:** Default @nuxtjs/color-mode uses `.dark-mode` class, but Bulma expects `[data-theme=dark]` attribute.
**How to avoid:** Set `dataValue: 'theme'` in colorMode config. This makes @nuxtjs/color-mode set `data-theme="dark"` on `<html>`, which Bulma natively understands.
**Warning signs:** Dark mode toggle appears to work but page colors don't change.

### Pitfall 8: Module Order in nuxt.config.ts

**What goes wrong:** SEO metadata breaks.
**Why it happens:** @nuxtjs/seo MUST come before @nuxt/content (documented project constraint).
**How to avoid:** Add new modules AFTER the existing `@nuxtjs/seo` and `@nuxt/content` entries. Place `nuxt-purgecss` last since it's a PostCSS plugin.
**Warning signs:** Missing SEO metadata, broken content queries.

## Code Examples

### Design Tokens (_variables.scss)

```scss
// app/assets/scss/_variables.scss
// Design tokens for DE5.org

// -- Brand colors
$type-s-red: #b81a35;
// Alternate refs for Phase 8 review: #e82c2a (acura.com CSS), #E40521 (community)

// -- Dark mode surface colors (warm neutrals, no blue undertone)
$dark-bg-base: #171717;        // hsl(0, 0%, 9%)
$dark-bg-surface: #262626;     // hsl(0, 0%, 15%)
$dark-bg-elevated: #333333;    // hsl(0, 0%, 20%)

// -- Typography
$font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI',
  Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans',
  'Helvetica Neue', sans-serif;

// -- Spacing scale
$spacing-xs: 0.25rem;    // 4px
$spacing-sm: 0.5rem;     // 8px
$spacing-md: 1rem;       // 16px
$spacing-lg: 1.5rem;     // 24px
$spacing-xl: 2rem;       // 32px
$spacing-2xl: 3rem;      // 48px
$spacing-3xl: 4rem;      // 64px

// -- Border radius
$radius-default: 0.375rem;   // 6px
$radius-lg: 0.75rem;         // 12px

// -- Shadows
$shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.08);
$shadow-card: 0 2px 8px rgba(0, 0, 0, 0.08);
$shadow-elevated: 0 8px 24px rgba(0, 0, 0, 0.12);

// -- Transitions
$transition-fast: 150ms ease;      // Hover states, button presses
$transition-base: 250ms ease;      // Color changes, opacity, theme transitions
$transition-slow: 350ms ease;      // Page transitions, larger layout shifts

// -- Layout
$content-max-width: 1024px;
```

### Dark Mode Toggle Component

```vue
<!-- app/components/ThemeToggle.vue -->
<template lang="pug">
//- Dark mode toggle button
button.theme-toggle(
  @click="toggle"
  :aria-label="isDark ? 'Switch to light mode' : 'Switch to dark mode'"
  type="button"
)
  //- Sun icon in dark mode, moon icon in light mode
  LucideSun(v-if="isDark" :size="20")
  LucideMoon(v-else :size="20")
</template>

<script setup lang="ts">
// Dark mode toggle using @nuxtjs/color-mode
const colorMode = useColorMode()

// Reactive dark mode state
const isDark = computed(() => colorMode.value === 'dark')

// Toggle between light and dark
const toggle = () => {
  colorMode.preference = colorMode.value === 'dark' ? 'light' : 'dark'
}
</script>

<style lang="scss" scoped>
// Toggle button -- minimal, accessible
.theme-toggle {
  background: none;
  border: none;
  cursor: pointer;
  padding: vars.$spacing-sm;
  color: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
  border-radius: vars.$radius-default;
  transition: background-color vars.$transition-fast;

  &:hover {
    background-color: rgba(128, 128, 128, 0.1);
  }
}
</style>
```

### Base Styles (_base.scss)

```scss
// app/assets/scss/_base.scss
// Global base styles on top of Bulma's minireset

@use 'variables' as vars;

// -- Link styling: accent color, no underline, underline on hover
a:not(.button):not(.navbar-item):not(.tag) {
  color: var(--bulma-primary);
  text-decoration: none;
  transition: color vars.$transition-fast, text-decoration-color vars.$transition-fast;

  &:hover {
    text-decoration: underline;
  }
}

// -- Responsive images: constrain to container
img {
  max-width: 100%;
  height: auto;
}

// -- Code blocks: basic monospace styling (no syntax highlighting)
pre,
code {
  font-family: 'SF Mono', SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace;
}

pre {
  padding: vars.$spacing-md;
  border-radius: vars.$radius-default;
  overflow-x: auto;
}

// -- Touch-friendly tap targets
button,
[role='button'],
.navbar-item,
.navbar-burger {
  min-height: 44px;
}

// -- Smooth color transitions for theme changes
body {
  transition: background-color vars.$transition-base, color vars.$transition-base;
}
```

### Content Markdown Styling (with Bulma .content)

```vue
<!-- Wrapping Nuxt Content rendered markdown with Bulma's .content class -->
<template lang="pug">
.section
  .container
    .content
      ContentRenderer(:value="doc")
</template>
```

Bulma's `.content` class automatically styles: headings (h1-h6), paragraphs, lists (ul/ol), tables, blockquotes, links, and code elements within the wrapper.

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|---|---|---|---|
| Sass `@import` | Sass `@use` / `@forward` | Deprecated Dart Sass 1.80.0 (2024) | Must use `@use` for all Bulma imports |
| Bulma 0.x (no CSS vars, no dark mode) | Bulma 1.x (CSS variables, themes, dark mode) | Bulma 1.0.0 (2024) | Dark mode built-in, no third-party extensions needed |
| @nuxtjs/google-fonts | @nuxt/fonts | 2024 | More providers, better optimization, auto-detection |
| Manual SVG icons | nuxt-lucide-icons | 2024 | Auto-import, tree-shaking, no manual imports |
| Custom dark mode JS | @nuxtjs/color-mode v4 | 2024-2025 | SSR-safe, FOUC prevention, storage, system preference |
| node-sass | sass (Dart Sass) | 2020+ | node-sass fully deprecated |

**Deprecated/outdated:**
- `node-sass`: Fully deprecated. Use `sass`.
- `@import` in SCSS: Deprecated since Dart Sass 1.80.0. Use `@use`/`@forward`.
- `bulma-scss` npm package: Unnecessary -- Bulma v1 is natively SCSS.
- `@nuxtjs/google-fonts`: Superseded by `@nuxt/fonts`.
- `@nuxtjs/style-resources`: Unnecessary -- use Vite `preprocessorOptions.scss.additionalData`.

## Discretion Recommendations

### Max Content Width: 1024px

Based on reference sites (nuxt.com uses ~1100px, content.nuxt.com uses ~1000px), 1024px provides excellent readability for text-heavy FAQ content while allowing generous whitespace on larger screens. Aligns with Bulma's `$desktop` breakpoint (1024px). Note: Bulma's `.container` has built-in max-widths (960px desktop, 1152px widescreen, 1344px fullhd) which are close enough to use as-is without custom overrides.

### Transition Durations

- `$transition-fast: 150ms ease` -- hover states, button presses
- `$transition-base: 250ms ease` -- color changes, opacity, dark mode property transitions
- `$transition-slow: 350ms ease` -- page transitions, larger layout shifts

These follow standard UI timing patterns and match nuxt.com's transition feel.

### Spacing Density

Use Bulma's `.section` (3rem top/bottom padding) for standard page sections. For landing-style hero areas, use `.hero.is-medium` (generous). For content-dense FAQ pages, use `.section` with standard padding. The spacing scale in `_variables.scss` provides a 4px-64px range for custom needs.

### Bulma Import Strategy

Start with a FULL Bulma import (`@use "bulma/sass" with (...)`) for simplicity and correctness. PurgeCSS handles unused CSS removal. If PurgeCSS has Nuxt 4 issues, switch to modular imports at that point. The full import is simpler to set up and less error-prone than managing individual module dependencies.

## Open Questions

1. **nuxt-purgecss Nuxt 4 Compatibility**
   - What we know: Open issue #203 (July 2025), merged compat PR #199 (Aug 2025), in-progress deps PR #204 (Jan 2026). Module last published Sep 2022 as v2.0.0.
   - What's unclear: Whether the current npm release actually works with Nuxt 4.3.0, or if an unreleased fix is needed.
   - Recommendation: Attempt to install and test nuxt-purgecss. If it works, great. If not, fall back to Bulma modular SCSS imports (import only needed components). Either way, the user's goal of eliminating unused CSS is achieved.

2. **@nuxt/fonts Detection of Inter via Bulma CSS Variables**
   - What we know: @nuxt/fonts auto-detects font-family declarations in CSS. Bulma generates `font-family` from `$family-primary` Sass variable. The compiled CSS will contain `font-family: 'Inter', ...` in `:root` CSS variables.
   - What's unclear: Whether @nuxt/fonts reliably detects fonts declared inside CSS custom property values vs. direct `font-family` properties.
   - Recommendation: Verify after implementation that Inter is served from `/_fonts/`. If not auto-detected, add explicit family config: `fonts: { families: [{ name: 'Inter', provider: 'google' }] }`.

3. **Dark Mode Warm Neutral -- Exact Lightness Values**
   - What we know: #171717 = `hsl(0, 0%, 9%)` and #262626 = `hsl(0, 0%, 15%)`. Bulma's dark theme has scheme-main-l at 9% (after our override), background-l at 14%.
   - What's unclear: Whether the bis/ter intermediate lightness values (12%, 15%) produce the right visual hierarchy. May need fine-tuning.
   - Recommendation: Implement with the calculated values, then visually verify. Adjust lightness percentages if surfaces don't have enough contrast differentiation.

## Sources

### Primary (HIGH confidence)

- [Bulma Sass customization docs](https://bulma.io/documentation/customize/with-sass/) -- `@use ... with ()` override syntax
- [Bulma modular Sass docs](https://bulma.io/documentation/customize/with-modular-sass/) -- per-component imports
- [Bulma dark mode docs](https://bulma.io/documentation/features/dark-mode/) -- CSS variable lightness values, `data-theme` attribute
- [Bulma themes docs](https://bulma.io/documentation/features/themes/) -- theme system, CSS variable collections
- [Bulma customization concepts](https://bulma.io/documentation/customize/concepts/) -- Sass/CSS variable relationship, `--bulma-` prefix
- [Bulma initial-variables.scss](https://github.com/jgthms/bulma/blob/main/sass/utilities/initial-variables.scss) -- default `$scheme-h: 221`, `$scheme-s: 14%`
- [Bulma dark.scss theme](https://github.com/jgthms/bulma/blob/main/sass/themes/dark.scss) -- dark theme `$scheme-main-l: 9%`
- [Bulma GitHub releases](https://github.com/jgthms/bulma/releases) -- confirmed v1.0.4 latest
- [Nuxt 4 styling docs](https://nuxt.com/docs/4.x/getting-started/styling) -- css array, preprocessorOptions
- [@nuxt/fonts docs](https://fonts.nuxt.com/) -- installation, providers, auto-download
- [@nuxt/fonts providers](https://fonts.nuxt.com/get-started/providers) -- local/google provider behavior
- [@nuxt/fonts configuration](https://fonts.nuxt.com/get-started/configuration) -- families, weights, subsets
- [@nuxt/fonts advanced](https://fonts.nuxt.com/advanced) -- build-time download, `/_fonts` path, caching
- [@nuxtjs/color-mode module page](https://nuxt.com/modules/color-mode) -- v4.0.0, Nuxt 3+ compatible
- [@nuxtjs/color-mode configuration](https://color-mode.nuxtjs.org/usage/configuration) -- `dataValue: 'theme'`, classSuffix, storage
- [nuxt-lucide-icons module page](https://nuxt.com/modules/lucide-icons) -- v2.0.0, auto-import, namePrefix
- [nuxt-purgecss module page](https://nuxt.com/modules/purgecss) -- v2.0.0, Nuxt 3+ compatible, safelist config
- [PurgeCSS safelisting docs](https://purgecss.com/safelisting) -- standard/deep/greedy patterns
- [Sass @import deprecation](https://sass-lang.com/documentation/breaking-changes/import/) -- deprecated in Dart Sass 1.80.0

### Secondary (MEDIUM confidence)

- [Bulma GitHub issue #3804](https://github.com/jgthms/bulma/issues/3804) -- dark theme color override techniques with register-vars
- [nuxt-purgecss GitHub issue #203](https://github.com/Developmint/nuxt-purgecss/issues/203) -- Nuxt 4 compatibility (open, Jul 2025)
- [nuxt-purgecss PR #199](https://github.com/Developmint/nuxt-purgecss/pull/199) -- v4 compat indication (merged Aug 2025)
- [nuxt-purgecss PR #204](https://github.com/Developmint/nuxt-purgecss/pull/204) -- Nuxt core v4 deps update (in progress, Jan 2026)
- [Nuxt SEO sub-modules list](https://nuxtseo.com/docs/nuxt-seo/guides/using-the-modules) -- confirmed @nuxtjs/color-mode NOT included

### Tertiary (LOW confidence)

- [nuxt-color-mode-with-bulma community guide](https://github.com/kensixx/nuxt-color-mode-with-bulma) -- older (Nuxt 2 era), but confirms dataValue approach

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH -- all packages verified via official docs and npm registry
- Architecture (SCSS patterns): HIGH -- verified via Bulma docs, Nuxt 4 docs
- Dark mode integration: HIGH -- `dataValue: 'theme'` verified in color-mode docs, `data-theme` verified in Bulma docs
- Warm neutral override: MEDIUM -- CSS variable approach is sound (`scheme-h`/`scheme-s` to 0), but exact lightness values need visual validation
- PurgeCSS + Nuxt 4: MEDIUM -- open compat issue, some fixes merged but no new npm release. Fallback strategy documented.
- Pitfalls: HIGH -- based on official docs and verified deprecation notices

**Research date:** 2026-02-09
**Valid until:** 2026-03-09 (30 days -- stable libraries, no breaking changes expected)
