---
phase: 02-content-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - content.config.ts
  - package.json
  - content/faqs/engine/oil-type-recommendation.md
  - content/faqs/engine/break-in-period.md
  - content/faqs/general/paint-codes.md
autonomous: true

must_haves:
  truths:
    - "content.config.ts imports z from 'zod' (not deprecated @nuxt/content re-export)"
    - "FAQ schema requires sourceUrl, sourceAuthor, sourceDate, and lastUpdated fields"
    - "Sample FAQ markdown files exist in content/faqs/ with valid frontmatter matching the schema"
    - "Each sample FAQ has question, category, sourceUrl, sourceAuthor, sourceDate, and lastUpdated in frontmatter"
  artifacts:
    - path: "content.config.ts"
      provides: "Hardened FAQ collection schema with required source metadata and lastUpdated"
      contains: "from 'zod'"
    - path: "content/faqs/engine/oil-type-recommendation.md"
      provides: "Sample FAQ with engine category and full source metadata"
      contains: "sourceUrl:"
    - path: "content/faqs/engine/break-in-period.md"
      provides: "Sample FAQ with engine category and full source metadata"
      contains: "lastUpdated:"
    - path: "content/faqs/general/paint-codes.md"
      provides: "Sample FAQ with general category and full source metadata"
      contains: "sourceAuthor:"
  key_links:
    - from: "content.config.ts"
      to: "content/faqs/**/*.md"
      via: "source: 'faqs/**/*.md' glob pattern"
      pattern: "source.*faqs/\\*\\*/\\*\\.md"
    - from: "content.config.ts"
      to: "zod"
      via: "import { z } from 'zod'"
      pattern: "from 'zod'"
---

<objective>
Harden the FAQ content schema and create sample FAQ content files.

Purpose: Establish the validated content foundation that all FAQ rendering depends on. The schema ensures every FAQ has source attribution metadata (URL, author, date) and freshness tracking (lastUpdated). Sample content proves the schema works and gives the page route (Plan 02) something to render.

Output: Updated content.config.ts with required source fields, zod as explicit dependency, and 3 sample FAQ markdown files across 2 categories.
</objective>

<execution_context>
@/Users/rich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-content-system/02-RESEARCH.md
@content.config.ts
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Harden FAQ schema and fix zod import</name>
  <files>content.config.ts, package.json</files>
  <action>
1. Add `zod` as an explicit dependency in package.json. Run `yarn add zod` (the package is already available as a transitive dep of @nuxt/content, but adding it explicitly follows the project's pattern for transitive deps -- same as better-sqlite3 and eslint).

2. Update content.config.ts:
   - Change the import from `import { defineCollection, defineContentConfig, z } from '@nuxt/content'` to two separate imports:
     - `import { defineCollection, defineContentConfig } from '@nuxt/content'`
     - `import { z } from 'zod'`
   - The deprecated z re-export from @nuxt/content will be removed in a future release (per research).

3. Update the faqs collection schema to make source fields REQUIRED (remove .optional()) and add lastUpdated:
   ```typescript
   schema: z.object({
     // FAQ display fields
     question: z.string(),
     category: z.string(),
     // Source attribution (required -- every FAQ must cite its source)
     sourceUrl: z.string(),
     sourceAuthor: z.string(),
     sourceDate: z.string(),
     // Freshness tracking (manual -- git dates are unreliable in SSG)
     lastUpdated: z.string(),
   }),
   ```

4. Keep the `content` collection unchanged.

IMPORTANT: Use `z.string()` for all date fields (NOT z.date()). YAML date parsing is inconsistent and z.date() causes validation failures.
  </action>
  <verify>
- `yarn install` completes without errors
- `grep "from 'zod'" content.config.ts` shows the new import
- `grep -c "optional" content.config.ts` returns 0 (no optional source fields)
- `grep "lastUpdated" content.config.ts` shows the new field
  </verify>
  <done>content.config.ts imports z from 'zod', all source metadata fields are required, lastUpdated field exists, zod is an explicit dependency in package.json</done>
</task>

<task type="auto">
  <name>Task 2: Create sample FAQ content files</name>
  <files>content/faqs/engine/oil-type-recommendation.md, content/faqs/engine/break-in-period.md, content/faqs/general/paint-codes.md</files>
  <action>
Remove the `.gitkeep` file from `content/faqs/` (no longer needed once real files exist).

Create category subdirectories and 3 sample FAQ markdown files. Each file MUST have all required frontmatter fields: question, category, sourceUrl, sourceAuthor, sourceDate, lastUpdated, title, description.

The `title` and `description` fields come from asSeoCollection() and are used for SEO meta tags. `question` is the FAQ-specific display field. Both title and description should be present.

File 1: `content/faqs/engine/oil-type-recommendation.md`
```markdown
---
question: "What oil type does the Integra Type S require?"
category: "engine"
sourceUrl: "https://www.integraforums.com/forum/threads/oil-type.12345/"
sourceAuthor: "ForumUser123"
sourceDate: "2025-08-15"
lastUpdated: "2026-02-09"
title: "Oil Type Recommendation"
description: "Recommended oil type and weight for the Acura Integra Type S K20C1 engine"
---

The Acura Integra Type S uses a K20C1 turbocharged engine that requires
**0W-20** full synthetic oil meeting Honda HTO-06 specification.

## Capacity

- With filter change: 5.7 quarts (5.4 liters)
- Without filter change: 5.3 quarts (5.0 liters)

## Recommended Brands

- Honda Genuine 0W-20 (OEM)
- Mobil 1 0W-20
- Pennzoil Ultra Platinum 0W-20
```

File 2: `content/faqs/engine/break-in-period.md`
```markdown
---
question: "What is the recommended break-in period?"
category: "engine"
sourceUrl: "https://www.integraforums.com/forum/threads/break-in-period.23456/"
sourceAuthor: "TypeS_Owner"
sourceDate: "2025-06-20"
lastUpdated: "2026-02-09"
title: "Break-in Period"
description: "Recommended break-in procedure and duration for the Integra Type S"
---

Acura recommends a **600-mile** (1,000 km) break-in period for the Integra Type S.

## During Break-in

- Keep RPM below **4,000** for the first 600 miles
- Vary your speed â€” avoid holding constant RPM for extended periods
- Avoid hard braking when possible
- Do not use cruise control for long distances

## After Break-in

After 600 miles, gradually increase RPM usage. Most owners report
the engine feels noticeably smoother after 1,500-2,000 miles.

## First Oil Change

Acura's maintenance schedule calls for the first oil change at
**7,500 miles** or 12 months. Some owners prefer an early change at
1,000-3,000 miles to flush break-in particulates.
```

File 3: `content/faqs/general/paint-codes.md`
```markdown
---
question: "What are the available paint codes for the Integra Type S?"
category: "general"
sourceUrl: "https://www.integraforums.com/forum/threads/paint-codes.34567/"
sourceAuthor: "DE5_Colors"
sourceDate: "2025-09-01"
lastUpdated: "2026-02-09"
title: "Paint Codes"
description: "Complete list of factory paint color codes for the Acura Integra Type S"
---

The Integra Type S is available in the following exterior colors:

## 2024-2025 Model Year Colors

| Color | Code |
|-------|------|
| Championship White | NH-0 |
| Platinum White Pearl | NH-883P |
| Apex Blue Pearl | B-621P |
| Tiger Eye Pearl | YR-652P |
| Performance Red Pearl | R-585P |

## Touch-Up Paint

OEM touch-up paint pens are available from Acura dealers.
Refer to the sticker on the driver's door jamb for your specific color code.
```

Ensure all dates use ISO format (YYYY-MM-DD) as plain strings.
  </action>
  <verify>
- `ls content/faqs/engine/` shows oil-type-recommendation.md and break-in-period.md
- `ls content/faqs/general/` shows paint-codes.md
- `! test -f content/faqs/.gitkeep` confirms .gitkeep removed
- `grep "sourceUrl:" content/faqs/engine/oil-type-recommendation.md` shows a URL
- `grep "lastUpdated:" content/faqs/general/paint-codes.md` shows a date
- `yarn dev` starts without content validation errors (check terminal output for schema errors)
  </verify>
  <done>3 sample FAQ files exist across 2 categories (engine, general), each with all required frontmatter fields (question, category, sourceUrl, sourceAuthor, sourceDate, lastUpdated, title, description)</done>
</task>

</tasks>

<verification>
1. `yarn dev` starts without errors -- content schema validates all 3 FAQ files
2. `grep "from 'zod'" content.config.ts` confirms proper import
3. `grep -r "sourceUrl:" content/faqs/` returns 3 matches (one per FAQ file)
4. `grep -r "lastUpdated:" content/faqs/` returns 3 matches
5. No `.optional()` calls remain on source metadata fields in content.config.ts
</verification>

<success_criteria>
- content.config.ts uses direct zod import (not deprecated @nuxt/content re-export)
- All source metadata fields (sourceUrl, sourceAuthor, sourceDate) are required in schema
- lastUpdated field exists in schema as z.string()
- 3 sample FAQ files validate against the schema without errors
- Dev server starts cleanly with content system loading all 3 FAQs
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-system/02-01-SUMMARY.md`
</output>
