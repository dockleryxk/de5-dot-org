---
phase: 02-content-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - content.config.ts
  - package.json
  - content/faqs/engine/oil-type-recommendation.md
  - content/faqs/engine/break-in-period.md
  - content/faqs/general/warranty-coverage.md
autonomous: true

must_haves:
  truths:
    - "FAQ frontmatter schema requires sourceUrl, sourceAuthor, sourceDate, and lastUpdated fields"
    - "Zod is imported from 'zod' package, not from '@nuxt/content'"
    - "Sample FAQ markdown files exist with valid frontmatter that passes schema validation"
    - "Content files are organized in category subdirectories under content/faqs/"
  artifacts:
    - path: "content.config.ts"
      provides: "Hardened FAQ collection schema with required source metadata"
      contains: "from 'zod'"
    - path: "content/faqs/engine/oil-type-recommendation.md"
      provides: "Sample FAQ with engine category"
      contains: "sourceUrl:"
    - path: "content/faqs/engine/break-in-period.md"
      provides: "Sample FAQ with engine category"
      contains: "sourceUrl:"
    - path: "content/faqs/general/warranty-coverage.md"
      provides: "Sample FAQ with general category"
      contains: "sourceUrl:"
  key_links:
    - from: "content.config.ts"
      to: "content/faqs/**/*.md"
      via: "source glob pattern"
      pattern: "source: 'faqs/\\*\\*/\\*.md'"
    - from: "content.config.ts"
      to: "zod"
      via: "direct import"
      pattern: "from 'zod'"
---

<objective>
Harden the FAQ content schema to require source metadata fields and create sample FAQ content files.

Purpose: Establish the data contract for all FAQ content — required source attribution (URL, author, date) and freshness tracking (lastUpdated). Fix the deprecated `z` import from `@nuxt/content` to use `zod` directly. Create sample content to validate the schema and provide data for Plan 02's rendering work.

Output: Updated `content.config.ts` with required fields, `zod` as explicit dependency, and 3 sample FAQ markdown files across 2 categories.
</objective>

<execution_context>
@/Users/rich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-content-system/02-RESEARCH.md
@content.config.ts
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Harden FAQ schema and fix zod import</name>
  <files>content.config.ts, package.json</files>
  <action>
1. Add `zod` as an explicit dependency in package.json. Run `yarn add zod` to install it. This follows the project pattern of making transitive deps explicit (like better-sqlite3 and eslint).

2. Update `content.config.ts`:
   - Change the import from `import { defineCollection, defineContentConfig, z } from '@nuxt/content'` to:
     - `import { defineCollection, defineContentConfig } from '@nuxt/content'`
     - `import { z } from 'zod'`
   - This fixes the deprecated re-export (see research: "z from @nuxt/content is deprecated").

3. Update the faqs collection schema to make source fields required and add lastUpdated:
   ```typescript
   schema: z.object({
     // FAQ display field
     question: z.string(),
     // Category for filtering (matches directory structure)
     category: z.string(),
     // Source attribution (required for transparency)
     sourceUrl: z.string(),
     sourceAuthor: z.string(),
     // Dates stored as ISO strings (z.string() not z.date() -- avoids YAML parsing issues)
     sourceDate: z.string(),
     // Freshness tracking (manual -- git dates unreliable in SSG)
     lastUpdated: z.string(),
   }),
   ```
   Note: All source fields change from `.optional()` to required. The `lastUpdated` field is new.

4. Remove the `.gitkeep` from `content/faqs/` since we are adding real files.

5. Run `yarn dev` briefly to confirm the config parses without errors, then stop the server.
  </action>
  <verify>
- `grep "from 'zod'" content.config.ts` shows the direct zod import
- `grep -v "optional()" content.config.ts` confirms no optional source fields remain
- `grep "lastUpdated" content.config.ts` confirms the new field exists
- `grep '"zod"' package.json` confirms zod is an explicit dependency
- `yarn dev` starts without config errors (stop after confirming)
  </verify>
  <done>
- content.config.ts imports z from 'zod' (not @nuxt/content)
- All source metadata fields (sourceUrl, sourceAuthor, sourceDate, lastUpdated) are required in schema
- zod is listed as an explicit dependency in package.json
- Dev server starts without schema/config errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Create sample FAQ content files</name>
  <files>content/faqs/engine/oil-type-recommendation.md, content/faqs/engine/break-in-period.md, content/faqs/general/warranty-coverage.md</files>
  <action>
Create 3 sample FAQ markdown files across 2 categories (engine, general) to validate the schema and provide content for Plan 02's rendering work. Each file must include all required frontmatter fields plus SEO fields (title, description) from asSeoCollection.

1. Create `content/faqs/engine/oil-type-recommendation.md`:
   ```markdown
   ---
   question: "What oil type does the Integra Type S require?"
   category: "engine"
   sourceUrl: "https://www.integraforums.com/forum/threads/oil-type.12345/"
   sourceAuthor: "ForumUser123"
   sourceDate: "2025-08-15"
   lastUpdated: "2026-02-09"
   title: "Oil Type Recommendation"
   description: "Recommended oil type and weight for the Acura Integra Type S K20C1 engine"
   ---

   The Acura Integra Type S uses a K20C1 turbocharged engine that requires
   **0W-20** full synthetic oil meeting Honda HTO-06 specification.

   ## Capacity

   - With filter change: 5.7 quarts (5.4 liters)
   - Without filter change: 5.3 quarts (5.0 liters)

   ## Recommended Brands

   - Honda Genuine 0W-20 (OEM)
   - Mobil 1 0W-20
   - Pennzoil Ultra Platinum 0W-20
   ```

2. Create `content/faqs/engine/break-in-period.md`:
   ```markdown
   ---
   question: "What is the recommended break-in period for the Type S?"
   category: "engine"
   sourceUrl: "https://www.integraforums.com/forum/threads/break-in.23456/"
   sourceAuthor: "TypeSOwner"
   sourceDate: "2025-06-20"
   lastUpdated: "2026-01-15"
   title: "Break-In Period"
   description: "Recommended break-in procedure for new Acura Integra Type S engines"
   ---

   Honda recommends a **600-mile break-in period** for the Integra Type S.

   ## During Break-In

   - Keep RPM below 4,000
   - Vary engine speed — avoid holding constant RPM for extended periods
   - Avoid hard braking when possible
   - Do not use cruise control for long stretches

   ## After Break-In

   After 600 miles, gradually increase RPM range over the next few hundred miles
   before using the full rev range.
   ```

3. Create `content/faqs/general/warranty-coverage.md`:
   ```markdown
   ---
   question: "What does the Integra Type S warranty cover?"
   category: "general"
   sourceUrl: "https://www.acura.com/warranty"
   sourceAuthor: "Acura"
   sourceDate: "2025-01-01"
   lastUpdated: "2026-02-01"
   title: "Warranty Coverage"
   description: "Overview of Acura Integra Type S warranty coverage and duration"
   ---

   The Acura Integra Type S comes with a comprehensive warranty package.

   ## Coverage Periods

   - **Basic:** 4 years / 50,000 miles (bumper-to-bumper)
   - **Powertrain:** 6 years / 70,000 miles
   - **Corrosion:** 5 years / unlimited miles
   - **Roadside Assistance:** 4 years / unlimited miles

   ## Key Notes

   - Warranty begins on the original date of purchase
   - Transferable to subsequent owners within the coverage period
   - Modifications may void specific coverage areas — consult your dealer
   ```

4. Run `yarn dev` and verify the content is discovered (check terminal output for content collection loading). Stop the server after confirming.
  </action>
  <verify>
- All 3 markdown files exist: `ls content/faqs/engine/ content/faqs/general/`
- Each file has all required frontmatter fields: `grep -l "sourceUrl" content/faqs/**/*.md` returns 3 files
- `yarn dev` starts and content collection loads without validation errors
  </verify>
  <done>
- 3 sample FAQ files exist across 2 category directories (engine/, general/)
- Each file contains all required frontmatter: question, category, sourceUrl, sourceAuthor, sourceDate, lastUpdated, title, description
- Content validates against the hardened schema without errors
  </done>
</task>

</tasks>

<verification>
1. `content.config.ts` imports `z` from `'zod'` (not `'@nuxt/content'`)
2. All 6 FAQ-specific fields in schema are required (no `.optional()`)
3. `zod` appears in package.json dependencies
4. 3 markdown files exist under `content/faqs/` in 2 category directories
5. `yarn dev` starts without content schema errors
</verification>

<success_criteria>
- Schema contract is locked: all FAQ content MUST have source attribution and freshness date
- Deprecated zod import is fixed
- Sample content validates and is ready for Plan 02's rendering work
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-system/02-01-SUMMARY.md`
</output>
