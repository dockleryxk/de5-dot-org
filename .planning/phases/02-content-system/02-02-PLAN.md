---
phase: 02-content-system
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - app/pages/faqs/[...slug].vue
autonomous: true

must_haves:
  truths:
    - "User can navigate to /faqs/engine/oil-type-recommendation and see rendered FAQ content"
    - "Content displays 'Last updated' date visible to users"
    - "Source attribution renders as clickable link to original post with author name"
    - "404 error shown when navigating to non-existent FAQ path"
    - "FAQ question displays as page heading"
  artifacts:
    - path: "app/pages/faqs/[...slug].vue"
      provides: "Catch-all FAQ page with content rendering, source attribution, and freshness display"
      min_lines: 30
  key_links:
    - from: "app/pages/faqs/[...slug].vue"
      to: "faqs collection"
      via: "queryCollection('faqs').path(route.path).first()"
      pattern: "queryCollection\\('faqs'\\)"
    - from: "app/pages/faqs/[...slug].vue"
      to: "ContentRenderer"
      via: "renders markdown AST"
      pattern: "ContentRenderer"
    - from: "app/pages/faqs/[...slug].vue"
      to: "source metadata"
      via: "faq.sourceUrl displayed as <a> link"
      pattern: ":href=\"faq\\.sourceUrl\""
---

<objective>
Create the FAQ page route with content rendering, source attribution, and freshness indicator display.

Purpose: This is the presentation layer that makes FAQ content visible to users. It creates the catch-all route that maps any `/faqs/**` path to the corresponding markdown content, renders it with Bulma typography, and displays source attribution and last-updated date — satisfying all four Phase 2 success criteria.

Output: `app/pages/faqs/[...slug].vue` — a complete FAQ detail page.
</objective>

<execution_context>
@/Users/rich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-content-system/02-RESEARCH.md
@.planning/phases/02-content-system/02-01-SUMMARY.md
@content.config.ts
@app/layouts/default.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create catch-all FAQ page with content rendering and metadata display</name>
  <files>app/pages/faqs/[...slug].vue</files>
  <action>
Create `app/pages/faqs/[...slug].vue` as a Vue SFC with Pug template and TypeScript setup script. This single page handles all FAQ routes via Nuxt Content's path-based routing.

**Template (Pug):**

```pug
//- FAQ detail page with content rendering and source attribution
section.section(v-if="faq")
  .container
    //- FAQ question as page heading
    h1.title {{ faq.question }}

    //- Freshness indicator -- last updated date
    p.is-size-7.has-text-grey.mb-5
      LucideCalendar(:size="14" style="vertical-align: middle;")
      |  Last updated: {{ formatDate(faq.lastUpdated) }}

    //- Rendered markdown content (Bulma .content class for typography)
    .content
      ContentRenderer(:value="faq")

    //- Source attribution box with external link
    .box.mt-5
      p.is-size-7.mb-0
        LucideExternalLink(:size="14" style="vertical-align: middle;")
        |  Source:
        = ' '
        a(:href="faq.sourceUrl" target="_blank" rel="noopener noreferrer")
          | {{ faq.sourceAuthor }}
        |  &middot; {{ formatDate(faq.sourceDate) }}
```

**Script (TypeScript setup):**

```typescript
// Fetch FAQ content matching the current route path
const route = useRoute()
const { data: faq } = await useAsyncData(route.path, () => {
  return queryCollection('faqs').path(route.path).first()
})

// 404 if FAQ not found
if (!faq.value) {
  throw createError({ statusCode: 404, statusMessage: 'FAQ not found' })
}

// SEO metadata from frontmatter question field
useHead({ title: faq.value.question })

// Format ISO date string (e.g. "2026-02-09") to human-readable (e.g. "February 9, 2026")
const formatDate = (dateStr: string): string => {
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(new Date(dateStr))
}
```

Key implementation details:
- Uses `queryCollection('faqs')` (v3 API, NOT `queryContent`)
- `.path(route.path).first()` matches the FAQ by its URL path
- `ContentRenderer` renders the parsed markdown AST
- Wrapping in `.content` applies Bulma's typography styling
- `formatDate` uses native `Intl.DateTimeFormat` (no library needed)
- Source link opens in new tab with `rel="noopener noreferrer"` for security
- LucideCalendar and LucideExternalLink auto-import via nuxt-lucide-icons module
- 404 handling via `createError` for non-existent paths

**Do NOT create separate SourceAttribution or FreshnessIndicator components.** The display is simple enough to be inline in this page. Extract to components only if reused in Phase 3 (FAQ listing page). Over-abstracting now would add files without value.
  </action>
  <verify>
1. Start dev server: `yarn dev`
2. Navigate to `http://localhost:3000/faqs/engine/oil-type-recommendation` -- should show:
   - "What oil type does the Integra Type S require?" as page heading
   - "Last updated: February 9, 2026" with calendar icon
   - Rendered markdown with headings, lists, and bold text
   - Source box with "ForumUser123" as clickable link to the forum URL
3. Navigate to `http://localhost:3000/faqs/general/warranty-coverage` -- should render warranty FAQ
4. Navigate to `http://localhost:3000/faqs/nonexistent` -- should show 404 error
5. Check browser tab title shows the FAQ question text
6. Stop the dev server
  </verify>
  <done>
- /faqs/engine/oil-type-recommendation renders with question heading, formatted content, freshness date, and source attribution link
- /faqs/general/warranty-coverage renders similarly
- /faqs/nonexistent returns 404
- Source attribution is a clickable external link opening in a new tab
- "Last updated" date is formatted in human-readable English (e.g., "February 9, 2026")
- Page title reflects the FAQ question
  </done>
</task>

</tasks>

<verification>
1. `app/pages/faqs/[...slug].vue` exists and uses `queryCollection('faqs')` (not `queryContent`)
2. Three sample FAQ pages render correctly at their expected URLs
3. Each page shows: question heading, last-updated date, rendered markdown body, source attribution link
4. Source attribution link is clickable and opens in new tab
5. Non-existent FAQ paths return 404
6. Page titles reflect FAQ questions
</verification>

<success_criteria>
All four Phase 2 success criteria are met:
1. Admin can create/edit FAQ content by adding markdown files in content/ directory (validated by Plan 01's sample files rendering here)
2. Each content file stores source URL, original author, and original post date in frontmatter (enforced by required schema from Plan 01)
3. Content displays "Last updated" date visible to users (freshness indicator on page)
4. Source attribution renders as clickable link to original post (source box at bottom of page)
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-system/02-02-SUMMARY.md`
</output>
