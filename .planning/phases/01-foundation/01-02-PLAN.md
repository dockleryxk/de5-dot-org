---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - eslint.config.mjs
  - .prettierrc
  - .prettierignore
  - .vscode/settings.json
  - .vscode/extensions.json
  - .husky/pre-commit
  - .husky/commit-msg
  - commitlint.config.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "`yarn lint` runs ESLint without errors on the codebase"
    - "`yarn format:check` runs Prettier check without formatting violations"
    - "Committing with a non-conventional message is rejected by commitlint hook"
    - "Committing staged files triggers lint-staged (ESLint fix + Prettier format)"
    - "VS Code opens with recommended extensions prompt"
  artifacts:
    - path: "eslint.config.mjs"
      provides: "ESLint flat config with Nuxt rules and Prettier conflict resolution"
      contains: "eslintConfigPrettier"
    - path: ".prettierrc"
      provides: "Prettier formatting configuration"
      contains: "singleQuote"
    - path: ".prettierignore"
      provides: "Files excluded from Prettier formatting"
      contains: ".nuxt"
    - path: ".vscode/settings.json"
      provides: "VS Code editor settings for ESLint + Prettier"
      contains: "formatOnSave"
    - path: ".vscode/extensions.json"
      provides: "Recommended VS Code extensions"
      contains: "vue.volar"
    - path: ".husky/pre-commit"
      provides: "Pre-commit hook running lint-staged"
      contains: "lint-staged"
    - path: ".husky/commit-msg"
      provides: "Commit message validation hook"
      contains: "commitlint"
    - path: "commitlint.config.ts"
      provides: "Conventional Commits validation config"
      contains: "@commitlint/config-conventional"
  key_links:
    - from: "eslint.config.mjs"
      to: ".nuxt/eslint.config.mjs"
      via: "withNuxt import"
      pattern: "withNuxt"
    - from: ".husky/pre-commit"
      to: "package.json"
      via: "lint-staged config"
      pattern: "lint-staged"
    - from: ".husky/commit-msg"
      to: "commitlint.config.ts"
      via: "commitlint CLI"
      pattern: "commitlint"
---

<objective>
Configure all development tooling: ESLint with Prettier integration, VS Code settings, git hooks for commit linting and staged file formatting.

Purpose: Enforce consistent code quality and formatting from the first commit. Git hooks prevent non-conventional commits and ensure all committed code passes linting and formatting checks.

Output: Working ESLint + Prettier pipeline, VS Code editor integration, Husky git hooks with lint-staged and commitlint.
</objective>

<execution_context>
@/Users/rich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure ESLint + Prettier + VS Code settings</name>
  <files>eslint.config.mjs, .prettierrc, .prettierignore, .vscode/settings.json, .vscode/extensions.json</files>
  <action>
Configure code quality tools. The @nuxt/eslint module was installed in Plan 01 and generates a base config at .nuxt/eslint.config.mjs.

**1. eslint.config.mjs** -- Create at project root. The @nuxt/eslint module provides a `withNuxt` wrapper. eslint-config-prettier MUST be last to disable conflicting formatting rules:
```javascript
// eslint.config.mjs
// ESLint flat config with Nuxt rules + Prettier conflict resolution
// eslint-config-prettier must be last to disable formatting rules that conflict with Prettier
import withNuxt from './.nuxt/eslint.config.mjs'
import eslintConfigPrettier from 'eslint-config-prettier'

export default withNuxt(
  eslintConfigPrettier,
)
```

NOTE: The `.nuxt/eslint.config.mjs` file is generated by running the Nuxt dev server. If it does not exist yet, run `yarn dev` briefly (then stop it) to generate the .nuxt directory before testing ESLint. Alternatively, `yarn lint` should trigger generation.

**2. .prettierrc** -- Prettier configuration:
```json
{
  "semi": false,
  "singleQuote": true,
  "trailingComma": "all",
  "printWidth": 100,
  "tabWidth": 2,
  "arrowParens": "always",
  "endOfLine": "lf"
}
```

NOTE: Do NOT include `pugSingleQuote` unless @prettier/plugin-pug is installed. The research identified this as an open question. For foundation, skip Pug-specific Prettier formatting -- Pug templates will be manually formatted and ESLint won't conflict since Prettier only runs on supported file types.

**3. .prettierignore** -- Exclude build artifacts and generated files:
```
.nuxt
.output
dist
node_modules
*.min.*
CHANGELOG.md
yarn.lock
.planning/
```

**4. .vscode/settings.json** -- Editor settings for ESLint + Prettier integration:
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "[vue]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "eslint.useFlatConfig": true,
  "typescript.tsdk": "node_modules/typescript/lib"
}
```

**5. .vscode/extensions.json** -- Recommended extensions:
```json
{
  "recommendations": [
    "vue.volar",
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode"
  ]
}
```

NOTE: Do NOT include `bradlc.vscode-tailwindcss` -- Tailwind is not part of this project. Only recommend extensions for tools actually used.
  </action>
  <verify>
Run `yarn dev` briefly to generate .nuxt/ if needed, then stop it. Run `yarn lint` -- should complete without errors. Run `npx prettier --check "app/**/*.vue"` -- should report files as formatted (or show formatting differences to fix). Verify `.vscode/settings.json` and `.vscode/extensions.json` exist.
  </verify>
  <done>
ESLint configured with Nuxt rules + Prettier conflict resolution. Prettier configured with project style (no semi, single quotes, trailing commas). VS Code settings enable format-on-save and ESLint auto-fix. Recommended extensions include Volar, ESLint, and Prettier.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Husky git hooks, lint-staged, commitlint, and package.json scripts</name>
  <files>.husky/pre-commit, .husky/commit-msg, commitlint.config.ts, package.json</files>
  <action>
Set up git hooks for pre-commit linting and commit message validation. All packages were installed in Plan 01.

**1. Initialize Husky:**
```bash
cd /Users/rich/Sites/de5-dot-org
npx husky init
```
This creates `.husky/` directory and adds `prepare` script to package.json.

If `npx husky init` has issues with yarn, manually:
```bash
mkdir -p .husky
echo "yarn lint-staged" > .husky/pre-commit
chmod +x .husky/pre-commit
```

**2. .husky/pre-commit** -- Run lint-staged on commit:
```bash
yarn lint-staged
```

**3. .husky/commit-msg** -- Validate commit messages with commitlint:
```bash
npx --no -- commitlint --edit "$1"
```

**4. commitlint.config.ts** -- Conventional Commits config:
```typescript
// commitlint.config.ts
// Enforce Conventional Commits format (feat:, fix:, docs:, etc.)
export default {
  extends: ['@commitlint/config-conventional'],
}
```

**5. Update package.json** -- Add all convenience scripts and lint-staged config.

Add these scripts (merge with any existing scripts from the scaffold):
```json
{
  "scripts": {
    "dev": "nuxi dev",
    "build": "nuxi build",
    "generate": "nuxi generate",
    "preview": "nuxi preview",
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "typecheck": "nuxi typecheck",
    "check": "yarn lint && yarn format:check && yarn typecheck",
    "clean": "rm -rf .nuxt .output dist node_modules/.cache",
    "changelog": "conventional-changelog -p conventionalcommits -i CHANGELOG.md -s",
    "prepare": "husky"
  }
}
```

Add lint-staged configuration to package.json:
```json
{
  "lint-staged": {
    "*.{js,ts,mjs,vue}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,md,yml,yaml,css}": [
      "prettier --write"
    ]
  }
}
```

IMPORTANT: When editing package.json, preserve all existing content (dependencies, devDependencies, name, version, etc.). Only add/update the `scripts` and `lint-staged` sections.

**6. Run prepare script to set up Husky:**
```bash
yarn prepare
```
  </action>
  <verify>
Run `yarn lint` -- should pass. Run `yarn format:check` -- should pass (fix any issues with `yarn format` first). Test commitlint by running: `echo "bad message" | npx commitlint` -- should fail. Test with valid message: `echo "feat: test message" | npx commitlint` -- should pass. Verify `.husky/pre-commit` and `.husky/commit-msg` exist and are executable. Verify `package.json` has all scripts (dev, build, generate, preview, lint, lint:fix, format, format:check, typecheck, check, clean, changelog, prepare).
  </verify>
  <done>
Git hooks configured: pre-commit runs lint-staged (ESLint fix + Prettier format on staged files), commit-msg validates Conventional Commits format via commitlint. All convenience scripts added to package.json (dev, build, generate, preview, lint, lint:fix, format, format:check, typecheck, check, clean, changelog). lint-staged config in package.json targets JS/TS/Vue and JSON/MD/YAML/CSS files.
  </done>
</task>

</tasks>

<verification>
1. `yarn lint` passes with no errors
2. `yarn format:check` passes with no formatting violations
3. `yarn check` runs lint + format:check + typecheck successfully
4. `echo "bad" | npx commitlint` fails (non-conventional message rejected)
5. `echo "feat: valid" | npx commitlint` passes
6. `.husky/pre-commit` exists and is executable
7. `.husky/commit-msg` exists and is executable
8. `.vscode/settings.json` configures format-on-save
9. `.vscode/extensions.json` recommends Volar, ESLint, Prettier
</verification>

<success_criteria>
- ESLint runs without errors on all project files
- Prettier formatting is consistent across codebase
- Husky hooks fire on commit (pre-commit + commit-msg)
- commitlint rejects non-conventional commit messages
- lint-staged only processes staged files
- All convenience scripts work (lint, format, check, clean, changelog)
- VS Code settings and extensions configured
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
