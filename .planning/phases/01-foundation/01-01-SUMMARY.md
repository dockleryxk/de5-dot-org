---
phase: 01-foundation
plan: 01
subsystem: core-infrastructure
tags: [nuxt4, nuxt-content-v3, nuxtjs-seo, pug, ssr, ssg]
requires: []
provides:
  - Working Nuxt 4 dev server
  - Content collection schema (FAQ with SEO)
  - App structure (layouts, pages, error handling)
  - Environment configuration
  - Dev tooling dependencies
affects:
  - 01-02 (dev tooling builds on installed deps)
  - 01-03 (documentation references project structure)
  - 02-01 (content system uses FAQ collection schema)
tech-stack:
  added:
    - nuxt@4.3.0
    - "@nuxt/content@3.11.2"
    - "@nuxtjs/seo@3.4.0"
    - "@nuxt/eslint@1.13.0"
    - better-sqlite3@12.6.2
    - pug@3.0.3
    - prettier@3.8.1
    - eslint@9.39.2
    - husky@9.1.7
    - lint-staged@16.2.7
    - "@commitlint/cli@20.4.1"
  patterns:
    - "Nuxt 4 app/ directory convention"
    - "Pug templates for all Vue components"
    - "asSeoCollection wrapper for content collections"
    - "Module ordering: @nuxtjs/seo before @nuxt/content"
key-files:
  created:
    - nuxt.config.ts
    - content.config.ts
    - app/app.vue
    - app/pages/index.vue
    - app/layouts/default.vue
    - app/layouts/minimal.vue
    - app/error.vue
    - .nvmrc
    - .env.example
    - .gitignore
    - eslint.config.mjs
    - tsconfig.json
    - package.json
    - yarn.lock
  modified: []
key-decisions:
  - id: FND-01
    decision: "Used Nuxt 4.3.0 minimal template with app/ directory structure"
    context: "Scaffold created Nuxt 4 compatible project with app/ directory convention"
  - id: FND-02
    decision: "Added better-sqlite3 as explicit dependency for Nuxt Content v3"
    context: "Content v3 requires SQLite adapter; auto-install prompt blocked in non-interactive"
  - id: FND-03
    decision: "Installed eslint as direct devDependency to satisfy @nuxt/eslint peer dependency"
    context: "@nuxt/eslint@1.13.0 has eslint@^9.0.0 as unmet peer dependency"
  - id: FND-04
    decision: "robots.txt renamed to _robots.txt by @nuxtjs/robots module"
    context: "Module manages robots.txt dynamically, renamed static file to avoid conflicts"
duration: "~6 minutes"
completed: "2026-02-05"
---

# Phase 1 Plan 1: Scaffold Nuxt 4 Project and Configure Core Application

Nuxt 4.3.0 project with @nuxtjs/seo, @nuxt/content v3, Pug templates, FAQ content schema with SEO integration, and full app structure (layouts, pages, error handling).

## Performance

| Metric | Value |
|--------|-------|
| Duration | ~6 minutes |
| Started | 2026-02-05T20:11:52Z |
| Completed | 2026-02-05T20:17:37Z |
| Tasks | 2/2 |
| Files created | 14 |
| Files modified | 0 |

## Accomplishments

### Task 1: Scaffold Nuxt 4 project and install all dependencies
- Scaffolded Nuxt 4.3.0 from minimal template into existing directory (preserving .git and .planning)
- Installed core modules: @nuxtjs/seo@3.4.0, @nuxt/content@3.11.2, @nuxt/eslint@1.13.0
- Installed dev dependencies: pug, prettier, eslint, eslint-config-prettier, husky, lint-staged, commitlint, conventional-changelog-cli
- Added better-sqlite3 (required by Nuxt Content v3 for SQLite database adapter)
- Added eslint (peer dependency of @nuxt/eslint)

### Task 2: Configure Nuxt application, content schema, and app structure
- nuxt.config.ts: Module order (@nuxtjs/seo before @nuxt/content), site identity, SSG config, title template, TypeScript settings
- content.config.ts: FAQ collection with Zod schema (question, category, sourceUrl, sourceAuthor, sourceDate) wrapped in asSeoCollection
- App structure: Root app.vue with NuxtLayout + NuxtPage, default layout (header/main/footer), minimal layout
- Homepage with "DE5.org" heading and community description using Pug templates
- Error page with 404/generic error handling using minimal layout
- Environment: .nvmrc (Node 22), .env.example with NUXT_PUBLIC_SITE_URL documented
- .gitignore with comprehensive Nuxt + IDE + OS rules (excludes .env, includes .env.example)
- Placeholder directories: content/faqs/, public/images/, types/, shared/

## Task Commits

| Task | Commit | Description |
|------|--------|-------------|
| 1 | 30ba44d | Scaffold Nuxt 4 project and install dependencies |
| 2 | b6ce972 | Configure Nuxt app, content schema, and app structure |

## Files Created

- `package.json` -- Project manifest with all dependencies
- `yarn.lock` -- Dependency lock file
- `tsconfig.json` -- TypeScript configuration (references .nuxt generated configs)
- `nuxt.config.ts` -- Nuxt configuration with modules, SEO, SSG, title template
- `content.config.ts` -- Content collections with FAQ schema and SEO integration
- `eslint.config.mjs` -- ESLint flat config (auto-generated by @nuxt/eslint)
- `app/app.vue` -- Root application component (NuxtLayout + NuxtPage)
- `app/pages/index.vue` -- Homepage with title and description
- `app/layouts/default.vue` -- Default layout with header, main, footer
- `app/layouts/minimal.vue` -- Minimal layout for error/special pages
- `app/error.vue` -- Global error page (404 + generic errors)
- `.nvmrc` -- Node version enforcement (22)
- `.env.example` -- Environment variable documentation
- `.gitignore` -- Git ignore rules for Nuxt + Node + IDE + OS

## Decisions Made

| ID | Decision | Rationale |
|----|----------|-----------|
| FND-01 | Used Nuxt 4.3.0 minimal template | Provides app/ directory structure per Nuxt 4 convention |
| FND-02 | Added better-sqlite3 explicitly | Required by @nuxt/content v3 for SQLite database adapter |
| FND-03 | Installed eslint as direct devDependency | Satisfies @nuxt/eslint peer dependency requirement |
| FND-04 | robots.txt renamed to _robots.txt | @nuxtjs/robots module manages robots.txt dynamically |

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Added better-sqlite3 dependency**
- **Found during:** Task 1, module installation
- **Issue:** @nuxt/content v3 requires better-sqlite3 for its SQLite database adapter. The module tried to prompt for auto-install but failed in non-interactive CLI.
- **Fix:** Manually installed `better-sqlite3` as a direct dependency.
- **Files modified:** package.json, yarn.lock
- **Commit:** 30ba44d

**2. [Rule 3 - Blocking] Installed eslint peer dependency**
- **Found during:** Task 1, after @nuxt/eslint installation
- **Issue:** @nuxt/eslint@1.13.0 has eslint@^9.0.0 as unmet peer dependency, causing warnings.
- **Fix:** Added eslint@^9.39.2 as direct devDependency.
- **Files modified:** package.json, yarn.lock
- **Commit:** 30ba44d

**3. [Rule 1 - Bug] Fixed import path for z (Zod) from @nuxt/content**
- **Found during:** Task 2, writing content.config.ts
- **Issue:** Plan imported `z` from `@nuxt/content` separately, but Nuxt Content v3 exports `z` from the same entry point as defineCollection.
- **Fix:** Used single import: `import { defineCollection, defineContentConfig, z } from '@nuxt/content'`
- **Files modified:** content.config.ts
- **Commit:** b6ce972

## Issues Encountered

- `nuxi module add` commands exit with error code 1 due to `@clack/prompts` rendering issue in non-interactive shells, but modules install correctly. The packages and nuxt.config.ts are updated before the error occurs.
- `nuxi init` interactive prompts required flags (`--template minimal --packageManager yarn --no-install --gitInit false`) to partially bypass, and still showed some prompts that didn't block file creation.

## Next Phase Readiness

**Ready for Plan 01-02 (Dev Tooling)**
- All dev dependencies installed (husky, lint-staged, commitlint, prettier, eslint)
- eslint.config.mjs generated by @nuxt/eslint module
- package.json has conventional commit infrastructure dependencies
- No blockers or concerns for next plan

**Ready for Plan 01-03 (Documentation)**
- Project structure established for README documentation
- GPL-3.0 license not yet created (Plan 03 responsibility)
- .env.example documents configuration for setup instructions

## Self-Check: PASSED
