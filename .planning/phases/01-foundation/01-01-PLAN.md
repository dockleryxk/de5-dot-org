---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - yarn.lock
  - nuxt.config.ts
  - content.config.ts
  - tsconfig.json
  - app/app.vue
  - app/pages/index.vue
  - app/layouts/default.vue
  - app/layouts/minimal.vue
  - app/error.vue
  - content/faqs/.gitkeep
  - public/images/.gitkeep
  - types/.gitkeep
  - shared/.gitkeep
  - .nvmrc
  - .env.example
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Running `yarn dev` starts Nuxt dev server on localhost:3000"
    - "Homepage renders at / with Pug template"
    - "Nuxt Content v3 module is loaded (no startup errors)"
    - "@nuxtjs/seo module is loaded (no startup errors)"
    - ".env.example documents NUXT_PUBLIC_SITE_URL with descriptive placeholder"
    - "No secrets or API keys exist in any committed file"
  artifacts:
    - path: "nuxt.config.ts"
      provides: "Nuxt configuration with modules, site config, SSG, title template"
      contains: "@nuxtjs/seo"
    - path: "content.config.ts"
      provides: "Content collections with FAQ schema and SEO integration"
      contains: "defineCollection"
    - path: "app/app.vue"
      provides: "Root application component"
      contains: "NuxtPage"
    - path: "app/layouts/default.vue"
      provides: "Default page layout"
    - path: "app/layouts/minimal.vue"
      provides: "Minimal layout for error/special pages"
    - path: "app/pages/index.vue"
      provides: "Homepage"
    - path: "app/error.vue"
      provides: "Global error page"
    - path: ".env.example"
      provides: "Environment variable documentation"
      contains: "NUXT_PUBLIC_SITE_URL"
    - path: ".nvmrc"
      provides: "Node version enforcement"
      contains: "22"
    - path: ".gitignore"
      provides: "Git ignore rules for Nuxt + IDE"
  key_links:
    - from: "nuxt.config.ts"
      to: "@nuxtjs/seo"
      via: "modules array"
      pattern: "@nuxtjs/seo.*@nuxt/content"
    - from: "content.config.ts"
      to: "@nuxtjs/seo"
      via: "asSeoCollection wrapper"
      pattern: "asSeoCollection"
    - from: "app/app.vue"
      to: "app/layouts/"
      via: "NuxtLayout component"
      pattern: "NuxtLayout"
---

<objective>
Scaffold the Nuxt 4 project with all core dependencies, configure the application structure, and establish the content schema foundation.

Purpose: This is the foundational plan -- everything else depends on a working Nuxt project. It creates the runnable application skeleton that dev tooling (Plan 02) and documentation (Plan 03) build upon.

Output: A working Nuxt 4 dev server with Nuxt Content v3, @nuxtjs/seo, Pug support, app structure (layouts, pages, error handling), content collection schema, and environment configuration.
</objective>

<execution_context>
@/Users/rich/.claude/get-shit-done/workflows/execute-plan.md
@/Users/rich/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Nuxt 4 project and install all dependencies</name>
  <files>package.json, yarn.lock, tsconfig.json</files>
  <action>
Scaffold a new Nuxt 4 project in the current directory (which already has .planning/ and .git/).

IMPORTANT: The directory already contains .planning/ and .git/ -- do NOT delete these. Scaffold INTO the existing directory.

Step 1 - Scaffold Nuxt into a temp directory, then move files:
```bash
# Scaffold into temp dir to avoid overwriting existing files
cd /tmp && yarn create nuxt de5-scaffold
# Copy scaffolded files into project (excluding .git)
cp -r /tmp/de5-scaffold/* /Users/rich/Sites/de5-dot-org/
cp /tmp/de5-scaffold/.gitignore /Users/rich/Sites/de5-dot-org/ 2>/dev/null
cp /tmp/de5-scaffold/.npmrc /Users/rich/Sites/de5-dot-org/ 2>/dev/null
# Copy any other hidden files the scaffold created (except .git)
# Clean up
rm -rf /tmp/de5-scaffold
```

Step 2 - Install core modules (order matters -- SEO before Content):
```bash
cd /Users/rich/Sites/de5-dot-org
npx nuxi module add @nuxtjs/seo
npx nuxi module add @nuxt/content
npx nuxi module add @nuxt/eslint
```

Step 3 - Install Pug and all dev dependencies:
```bash
yarn add --dev pug
yarn add --dev prettier eslint-config-prettier
yarn add --dev husky lint-staged @commitlint/cli @commitlint/config-conventional
yarn add --dev conventional-changelog-cli
```

NOTE: If `yarn create nuxt` prompts for options, select defaults. The scaffold should create a Nuxt 4 project with the `app/` directory structure. If it does NOT create an `app/` directory (i.e., it scaffolds Nuxt 3 style with root-level pages/), you will need to create the `app/` directory and move application files into it per Nuxt 4 convention.

After installation, verify Nuxt 4 is installed:
```bash
cat package.json | grep '"nuxt"'
```
Expected: `"nuxt": "^4.x"` or similar v4 version.
  </action>
  <verify>
Run `ls app/` to confirm app/ directory exists. Run `cat package.json` to confirm all dependencies are listed (nuxt, @nuxtjs/seo, @nuxt/content, @nuxt/eslint, pug, prettier, eslint-config-prettier, husky, lint-staged, @commitlint/cli, @commitlint/config-conventional, conventional-changelog-cli). Run `yarn nuxi info` to confirm Nuxt version.
  </verify>
  <done>
Nuxt 4 project scaffolded with all dependencies installed. app/ directory exists. All core modules and dev dependencies present in package.json.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Nuxt application, content schema, and app structure</name>
  <files>nuxt.config.ts, content.config.ts, app/app.vue, app/pages/index.vue, app/layouts/default.vue, app/layouts/minimal.vue, app/error.vue, content/faqs/.gitkeep, public/images/.gitkeep, types/.gitkeep, shared/.gitkeep, .nvmrc, .env.example, .gitignore</files>
  <action>
Configure all core application files. Use Pug for ALL Vue template blocks (user preference).

**1. nuxt.config.ts** -- Replace scaffold default with full foundation config:
```typescript
// nuxt.config.ts
// Foundation configuration for DE5.org
// Module order: @nuxtjs/seo MUST come before @nuxt/content
export default defineNuxtConfig({
  modules: [
    '@nuxtjs/seo',
    '@nuxt/content',
    '@nuxt/eslint',
  ],

  // Site identity for SEO modules
  site: {
    url: process.env.NUXT_PUBLIC_SITE_URL || 'http://localhost:3000',
    name: 'DE5.org',
    description: 'Community knowledge hub for Acura Integra Type S (DE5) owners',
  },

  // SSG (static site generation) -- default behavior with nuxi generate
  // ISR migration: add routeRules with swr option when needed
  nitro: {
    prerender: {
      routes: ['/'],
    },
  },

  // SEO title pattern and HTML attributes
  app: {
    head: {
      titleTemplate: '%s | DE5.org',
      htmlAttrs: { lang: 'en' },
    },
  },

  // TypeScript: moderate strictness (Nuxt defaults)
  typescript: {
    strict: false,
    typeCheck: false, // Enable in CI via nuxi typecheck
  },

  // ESLint dev server checker disabled (run lint manually or in CI)
  eslint: {
    checker: false,
  },

  // Future-proofing: compatibility date for stable behavior across updates
  compatibilityDate: '2025-01-01',
})
```

**2. content.config.ts** -- Create at project root:
```typescript
// content.config.ts
// Nuxt Content v3 collections configuration
// Defines FAQ collection with typed frontmatter and SEO integration
import { defineCollection, defineContentConfig } from '@nuxt/content'
import { asSeoCollection } from '@nuxtjs/seo/content'
import { z } from '@nuxt/content'

export default defineContentConfig({
  collections: {
    // FAQ content collection -- type-based folders with frontmatter categories
    faqs: defineCollection(
      asSeoCollection({
        type: 'page',
        source: 'faqs/**/*.md',
        schema: z.object({
          question: z.string(),
          category: z.string(),
          sourceUrl: z.string().optional(),
          sourceAuthor: z.string().optional(),
          sourceDate: z.string().optional(),
        }),
      }),
    ),

    // General content pages (about, etc.) -- added when needed
    content: defineCollection(
      asSeoCollection({
        type: 'page',
        source: '*.md',
      }),
    ),
  },
})
```

**3. app/app.vue** -- Root component with NuxtLayout and NuxtPage:
```vue
<template lang="pug">
NuxtLayout
  NuxtPage
</template>
```

**4. app/layouts/default.vue** -- Standard layout with header/main/footer structure:
```vue
<template lang="pug">
div
  //- Site header
  header
    nav
      NuxtLink(to="/") DE5.org

  //- Page content
  main
    slot

  //- Site footer
  footer
    p &copy; {{ new Date().getFullYear() }} DE5.org — For Acura Integra Type S (DE5) owners
</template>
```

**5. app/layouts/minimal.vue** -- Minimal layout for error/special pages:
```vue
<template lang="pug">
div
  main
    slot
</template>
```

**6. app/pages/index.vue** -- Homepage placeholder:
```vue
<template lang="pug">
div
  h1 DE5.org
  p Community knowledge hub for Acura Integra Type S (DE5) owners.
  p
    em Coming soon — curated FAQs, search, and community knowledge.
</template>

<script setup lang="ts">
// Homepage metadata
useHead({
  title: 'Home',
})
</script>
```

**7. app/error.vue** -- Global error page using minimal layout:
```vue
<template lang="pug">
NuxtLayout(name="minimal")
  div
    h1 {{ error?.statusCode === 404 ? 'Page Not Found' : 'Something Went Wrong' }}
    p {{ error?.statusCode === 404 ? 'The page you are looking for does not exist.' : 'An unexpected error occurred.' }}
    NuxtLink(to="/") Go back home
</template>

<script setup lang="ts">
// Global error handler
// Renders for both 404s and unexpected errors
import type { NuxtError } from '#app'

defineProps<{
  error: NuxtError
}>()
</script>
```

**8. .nvmrc** -- Node version:
```
22
```

**9. .env.example** -- Environment variable documentation:
```bash
# =============================================================================
# DE5.org Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# See README.md Configuration section for details.

# -----------------------------------------------------------------------------
# Site
# -----------------------------------------------------------------------------
# Public URL of the site (used for canonical URLs, sitemaps, OG tags)
# Required for production; defaults to localhost for development
NUXT_PUBLIC_SITE_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Analytics (Phase 6 -- not needed yet)
# -----------------------------------------------------------------------------
# NUXT_PUBLIC_ANALYTICS_ID=YOUR_ANALYTICS_ID_HERE
```

**10. .gitignore** -- Comprehensive Nuxt + IDE ignore rules. Start from the scaffold's .gitignore and ensure it includes:
```
# Nuxt
.nuxt
.output
dist
.data
.nitro
.cache

# Node
node_modules

# Environment
.env
.env.*
!.env.example

# IDE
.idea/
*.sw?
*.swo

# OS
.DS_Store
Thumbs.db

# Logs
*.log

# Testing
coverage/

# Build artifacts
*.tsbuildinfo
```

NOTE: Do NOT add .vscode/ to .gitignore (shared settings will be committed per user decision). Do NOT add .planning/ to .gitignore (planning docs are committed per user decision).

**11. Create placeholder directories** (with .gitkeep to preserve in git):
- `content/faqs/.gitkeep`
- `public/images/.gitkeep`
- `types/.gitkeep`
- `shared/.gitkeep`

Do NOT create `test/` yet (test setup deferred per user decision). Do NOT create `server/` (add when needed per user decision).
  </action>
  <verify>
Run `yarn dev` and confirm the server starts on localhost:3000 without errors. Visit http://localhost:3000 in a browser (or curl) and confirm the homepage renders "DE5.org" and "Community knowledge hub" text. Stop the dev server. Run `cat .nvmrc` to confirm "22". Run `cat .env.example` to confirm NUXT_PUBLIC_SITE_URL is documented.
  </verify>
  <done>
Nuxt 4 application fully configured with: nuxt.config.ts (modules in correct order, SEO site config, SSG, title template), content.config.ts (FAQ collection with Zod schema + SEO integration), app structure (app.vue, default + minimal layouts, homepage, error page -- all using Pug templates), environment configuration (.env.example, .nvmrc), .gitignore, and placeholder directories. Dev server starts and homepage renders.
  </done>
</task>

</tasks>

<verification>
1. `yarn dev` starts without errors and serves homepage at localhost:3000
2. Homepage shows "DE5.org" heading and community description
3. `nuxt.config.ts` has @nuxtjs/seo BEFORE @nuxt/content in modules array
4. `content.config.ts` has faqs collection with question, category, sourceUrl fields
5. All .vue files use `<template lang="pug">` syntax
6. `.env.example` has NUXT_PUBLIC_SITE_URL with localhost default
7. `.nvmrc` contains "22"
8. `.gitignore` excludes .env but NOT .env.example
9. No .env file committed (only .env.example)
</verification>

<success_criteria>
- Nuxt 4 dev server starts and renders homepage
- All core modules loaded without errors (@nuxtjs/seo, @nuxt/content, @nuxt/eslint)
- Content collection schema defined with FAQ fields
- App structure follows Nuxt 4 convention (app/ directory)
- Environment variables documented in .env.example
- No secrets in committed code
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
